ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"tos_timer.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.timer_change,"ax",%progbits
  16              		.align	1
  17              		.arch armv7-m
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	timer_change:
  24              	.LVL0:
  25              	.LFB117:
  26              		.file 1 "..//kernel/core/tos_timer.c"
   1:..//kernel/core/tos_timer.c **** /*----------------------------------------------------------------------------
   2:..//kernel/core/tos_timer.c ****  * Tencent is pleased to support the open source community by making TencentOS
   3:..//kernel/core/tos_timer.c ****  * available.
   4:..//kernel/core/tos_timer.c ****  *
   5:..//kernel/core/tos_timer.c ****  * Copyright (C) 2019 THL A29 Limited, a Tencent company. All rights reserved.
   6:..//kernel/core/tos_timer.c ****  * If you have downloaded a copy of the TencentOS binary from Tencent, please
   7:..//kernel/core/tos_timer.c ****  * note that the TencentOS binary is licensed under the BSD 3-Clause License.
   8:..//kernel/core/tos_timer.c ****  *
   9:..//kernel/core/tos_timer.c ****  * If you have downloaded a copy of the TencentOS source code from Tencent,
  10:..//kernel/core/tos_timer.c ****  * please note that TencentOS source code is licensed under the BSD 3-Clause
  11:..//kernel/core/tos_timer.c ****  * License, except for the third-party components listed below which are
  12:..//kernel/core/tos_timer.c ****  * subject to different license terms. Your integration of TencentOS into your
  13:..//kernel/core/tos_timer.c ****  * own projects may require compliance with the BSD 3-Clause License, as well
  14:..//kernel/core/tos_timer.c ****  * as the other licenses applicable to the third-party components included
  15:..//kernel/core/tos_timer.c ****  * within TencentOS.
  16:..//kernel/core/tos_timer.c ****  *---------------------------------------------------------------------------*/
  17:..//kernel/core/tos_timer.c **** 
  18:..//kernel/core/tos_timer.c **** #include "tos_k.h"
  19:..//kernel/core/tos_timer.c **** 
  20:..//kernel/core/tos_timer.c **** #if TOS_CFG_TIMER_EN > 0u
  21:..//kernel/core/tos_timer.c **** 
  22:..//kernel/core/tos_timer.c **** __STATIC__ void timer_place(k_timer_t *tmr)
  23:..//kernel/core/tos_timer.c **** {
  24:..//kernel/core/tos_timer.c ****     TOS_CPU_CPSR_ALLOC();
  25:..//kernel/core/tos_timer.c ****     k_timer_t *iter = K_NULL;
  26:..//kernel/core/tos_timer.c **** 
  27:..//kernel/core/tos_timer.c ****     TOS_CPU_INT_DISABLE();
  28:..//kernel/core/tos_timer.c **** 
  29:..//kernel/core/tos_timer.c ****     tmr->expires += k_tick_count;
  30:..//kernel/core/tos_timer.c **** 
  31:..//kernel/core/tos_timer.c ****     TOS_LIST_FOR_EACH_ENTRY(iter, k_timer_t, list, &k_timer_ctl.list) {
  32:..//kernel/core/tos_timer.c ****         if (tmr->expires < iter->expires) {
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 2


  33:..//kernel/core/tos_timer.c ****             break;
  34:..//kernel/core/tos_timer.c ****         }
  35:..//kernel/core/tos_timer.c ****     }
  36:..//kernel/core/tos_timer.c ****     tos_list_add_tail(&tmr->list, &iter->list);
  37:..//kernel/core/tos_timer.c **** 
  38:..//kernel/core/tos_timer.c ****     if (k_timer_ctl.list.next == &tmr->list) {
  39:..//kernel/core/tos_timer.c ****         // we are the first guy now
  40:..//kernel/core/tos_timer.c ****         k_timer_ctl.next_expires = tmr->expires;
  41:..//kernel/core/tos_timer.c **** 
  42:..//kernel/core/tos_timer.c **** #if TOS_CFG_TIMER_AS_PROC == 0u
  43:..//kernel/core/tos_timer.c ****         if (task_state_is_sleeping(&k_timer_task)) {
  44:..//kernel/core/tos_timer.c ****             tos_task_delay_abort(&k_timer_task);
  45:..//kernel/core/tos_timer.c ****         }
  46:..//kernel/core/tos_timer.c **** #endif
  47:..//kernel/core/tos_timer.c ****     }
  48:..//kernel/core/tos_timer.c **** 
  49:..//kernel/core/tos_timer.c **** #if TOS_CFG_TIMER_AS_PROC == 0u
  50:..//kernel/core/tos_timer.c ****     if (task_state_is_suspended(&k_timer_task)) {
  51:..//kernel/core/tos_timer.c ****         tos_task_resume(&k_timer_task);
  52:..//kernel/core/tos_timer.c ****     }
  53:..//kernel/core/tos_timer.c **** #endif
  54:..//kernel/core/tos_timer.c **** 
  55:..//kernel/core/tos_timer.c ****     TOS_CPU_INT_ENABLE();
  56:..//kernel/core/tos_timer.c **** }
  57:..//kernel/core/tos_timer.c **** 
  58:..//kernel/core/tos_timer.c **** __STATIC__ void timer_takeoff(k_timer_t *tmr)
  59:..//kernel/core/tos_timer.c **** {
  60:..//kernel/core/tos_timer.c ****     TOS_CPU_CPSR_ALLOC();
  61:..//kernel/core/tos_timer.c ****     k_timer_t *first, *next;
  62:..//kernel/core/tos_timer.c **** 
  63:..//kernel/core/tos_timer.c ****     TOS_CPU_INT_DISABLE();
  64:..//kernel/core/tos_timer.c **** 
  65:..//kernel/core/tos_timer.c ****     first = TOS_LIST_FIRST_ENTRY(&k_timer_ctl.list, k_timer_t, list);
  66:..//kernel/core/tos_timer.c **** 
  67:..//kernel/core/tos_timer.c ****     tos_list_del(&tmr->list);
  68:..//kernel/core/tos_timer.c **** 
  69:..//kernel/core/tos_timer.c ****     if (first == tmr) {
  70:..//kernel/core/tos_timer.c ****         // if the first guy removed, we need to refresh k_timer_ctl.next_expires
  71:..//kernel/core/tos_timer.c ****         next = TOS_LIST_FIRST_ENTRY_OR_NULL(&tmr->list, k_timer_t, list);
  72:..//kernel/core/tos_timer.c ****         if (!next) {
  73:..//kernel/core/tos_timer.c ****             // the only guy removed
  74:..//kernel/core/tos_timer.c ****             k_timer_ctl.next_expires = TOS_TIME_FOREVER;
  75:..//kernel/core/tos_timer.c ****         } else {
  76:..//kernel/core/tos_timer.c ****             k_timer_ctl.next_expires = next->expires;
  77:..//kernel/core/tos_timer.c ****         }
  78:..//kernel/core/tos_timer.c ****     }
  79:..//kernel/core/tos_timer.c **** 
  80:..//kernel/core/tos_timer.c ****     TOS_CPU_INT_ENABLE();
  81:..//kernel/core/tos_timer.c **** }
  82:..//kernel/core/tos_timer.c **** 
  83:..//kernel/core/tos_timer.c **** __STATIC_INLINE__ void timer_reset(k_timer_t *tmr)
  84:..//kernel/core/tos_timer.c **** {
  85:..//kernel/core/tos_timer.c ****     tmr->state          = TIMER_STATE_UNUSED;
  86:..//kernel/core/tos_timer.c ****     tmr->delay          = (k_tick_t)0u;
  87:..//kernel/core/tos_timer.c ****     tmr->expires        = (k_tick_t)0u;
  88:..//kernel/core/tos_timer.c ****     tmr->period         = (k_tick_t)0u;
  89:..//kernel/core/tos_timer.c ****     tmr->opt            = (k_opt_t)0u;
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 3


  90:..//kernel/core/tos_timer.c ****     tmr->cb             = K_NULL;
  91:..//kernel/core/tos_timer.c ****     tmr->cb_arg         = K_NULL;
  92:..//kernel/core/tos_timer.c ****     tos_list_init(&tmr->list);
  93:..//kernel/core/tos_timer.c **** 
  94:..//kernel/core/tos_timer.c ****     TOS_OBJ_DEINIT(tmr);
  95:..//kernel/core/tos_timer.c **** }
  96:..//kernel/core/tos_timer.c **** 
  97:..//kernel/core/tos_timer.c **** __API__ k_err_t tos_timer_create(k_timer_t *tmr,
  98:..//kernel/core/tos_timer.c ****                                         k_tick_t delay,
  99:..//kernel/core/tos_timer.c ****                                         k_tick_t period,
 100:..//kernel/core/tos_timer.c ****                                         k_timer_callback_t callback,
 101:..//kernel/core/tos_timer.c ****                                         void *cb_arg,
 102:..//kernel/core/tos_timer.c ****                                         k_opt_t opt)
 103:..//kernel/core/tos_timer.c **** {
 104:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
 105:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(callback);
 106:..//kernel/core/tos_timer.c **** 
 107:..//kernel/core/tos_timer.c ****     if (opt == TOS_OPT_TIMER_PERIODIC && period == (k_tick_t)0u) {
 108:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INVALID_PERIOD;
 109:..//kernel/core/tos_timer.c ****     }
 110:..//kernel/core/tos_timer.c **** 
 111:..//kernel/core/tos_timer.c ****     if (opt == TOS_OPT_TIMER_ONESHOT && delay == (k_tick_t)0u) {
 112:..//kernel/core/tos_timer.c ****         // if you create a oneshot timer and delay 0 to trigger, why don't just call the timer_call
 113:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INVALID_DELAY;
 114:..//kernel/core/tos_timer.c ****     }
 115:..//kernel/core/tos_timer.c **** 
 116:..//kernel/core/tos_timer.c ****     if (opt != TOS_OPT_TIMER_ONESHOT && opt != TOS_OPT_TIMER_PERIODIC) {
 117:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INVALID_OPT;
 118:..//kernel/core/tos_timer.c ****     }
 119:..//kernel/core/tos_timer.c **** 
 120:..//kernel/core/tos_timer.c ****     if (delay == TOS_TIME_FOREVER) {
 121:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_DELAY_FOREVER;
 122:..//kernel/core/tos_timer.c ****     }
 123:..//kernel/core/tos_timer.c **** 
 124:..//kernel/core/tos_timer.c ****     if (period == TOS_TIME_FOREVER) {
 125:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_PERIOD_FOREVER;
 126:..//kernel/core/tos_timer.c ****     }
 127:..//kernel/core/tos_timer.c **** 
 128:..//kernel/core/tos_timer.c ****     tmr->state          = TIMER_STATE_STOPPED;
 129:..//kernel/core/tos_timer.c ****     tmr->delay          = delay;
 130:..//kernel/core/tos_timer.c ****     tmr->expires        = (k_tick_t)0u;
 131:..//kernel/core/tos_timer.c ****     tmr->period         = period;
 132:..//kernel/core/tos_timer.c ****     tmr->opt            = opt;
 133:..//kernel/core/tos_timer.c ****     tmr->cb             = callback;
 134:..//kernel/core/tos_timer.c ****     tmr->cb_arg         = cb_arg;
 135:..//kernel/core/tos_timer.c ****     tos_list_init(&tmr->list);
 136:..//kernel/core/tos_timer.c **** 
 137:..//kernel/core/tos_timer.c ****     TOS_OBJ_INIT(tmr, KNL_OBJ_TYPE_TIMER);
 138:..//kernel/core/tos_timer.c **** 
 139:..//kernel/core/tos_timer.c ****     return K_ERR_NONE;
 140:..//kernel/core/tos_timer.c **** }
 141:..//kernel/core/tos_timer.c **** 
 142:..//kernel/core/tos_timer.c **** __API__ k_err_t tos_timer_destroy(k_timer_t *tmr)
 143:..//kernel/core/tos_timer.c **** {
 144:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
 145:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 146:..//kernel/core/tos_timer.c **** 
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 4


 147:..//kernel/core/tos_timer.c ****     if (tmr->state == TIMER_STATE_UNUSED) {
 148:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 149:..//kernel/core/tos_timer.c ****     }
 150:..//kernel/core/tos_timer.c **** 
 151:..//kernel/core/tos_timer.c ****     if (tmr->state == TIMER_STATE_RUNNING) {
 152:..//kernel/core/tos_timer.c ****         timer_takeoff(tmr);
 153:..//kernel/core/tos_timer.c ****     }
 154:..//kernel/core/tos_timer.c **** 
 155:..//kernel/core/tos_timer.c ****     timer_reset(tmr);
 156:..//kernel/core/tos_timer.c ****     return K_ERR_NONE;
 157:..//kernel/core/tos_timer.c **** }
 158:..//kernel/core/tos_timer.c **** 
 159:..//kernel/core/tos_timer.c **** __API__ k_err_t tos_timer_start(k_timer_t *tmr)
 160:..//kernel/core/tos_timer.c **** {
 161:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
 162:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 163:..//kernel/core/tos_timer.c **** 
 164:..//kernel/core/tos_timer.c ****     if (tmr->state == TIMER_STATE_UNUSED) {
 165:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 166:..//kernel/core/tos_timer.c ****     }
 167:..//kernel/core/tos_timer.c **** 
 168:..//kernel/core/tos_timer.c ****     if (tmr->state == TIMER_STATE_RUNNING) {
 169:..//kernel/core/tos_timer.c ****         timer_takeoff(tmr);
 170:..//kernel/core/tos_timer.c ****         tmr->expires = tmr->delay;
 171:..//kernel/core/tos_timer.c ****         timer_place(tmr);
 172:..//kernel/core/tos_timer.c ****         return K_ERR_NONE;
 173:..//kernel/core/tos_timer.c ****     }
 174:..//kernel/core/tos_timer.c **** 
 175:..//kernel/core/tos_timer.c ****     if (tmr->state == TIMER_STATE_STOPPED ||
 176:..//kernel/core/tos_timer.c ****         tmr->state == TIMER_STATE_COMPLETED) {
 177:..//kernel/core/tos_timer.c ****         tmr->state = TIMER_STATE_RUNNING;
 178:..//kernel/core/tos_timer.c ****         if (tmr->delay == (k_tick_t)0u) {
 179:..//kernel/core/tos_timer.c ****             tmr->expires = tmr->period;
 180:..//kernel/core/tos_timer.c ****         } else {
 181:..//kernel/core/tos_timer.c ****             tmr->expires = tmr->delay;
 182:..//kernel/core/tos_timer.c ****         }
 183:..//kernel/core/tos_timer.c ****         timer_place(tmr);
 184:..//kernel/core/tos_timer.c ****         return K_ERR_NONE;
 185:..//kernel/core/tos_timer.c ****     }
 186:..//kernel/core/tos_timer.c **** 
 187:..//kernel/core/tos_timer.c ****     return K_ERR_TIMER_INVALID_STATE;
 188:..//kernel/core/tos_timer.c **** }
 189:..//kernel/core/tos_timer.c **** 
 190:..//kernel/core/tos_timer.c **** __API__ k_err_t tos_timer_stop(k_timer_t *tmr)
 191:..//kernel/core/tos_timer.c **** {
 192:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
 193:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 194:..//kernel/core/tos_timer.c **** 
 195:..//kernel/core/tos_timer.c ****     if (tmr->state == TIMER_STATE_UNUSED) {
 196:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 197:..//kernel/core/tos_timer.c ****     }
 198:..//kernel/core/tos_timer.c **** 
 199:..//kernel/core/tos_timer.c ****     if (tmr->state == TIMER_STATE_COMPLETED ||
 200:..//kernel/core/tos_timer.c ****         tmr->state == TIMER_STATE_STOPPED) {
 201:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_STOPPED;
 202:..//kernel/core/tos_timer.c ****     }
 203:..//kernel/core/tos_timer.c **** 
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 5


 204:..//kernel/core/tos_timer.c ****     if (tmr->state == TIMER_STATE_RUNNING) {
 205:..//kernel/core/tos_timer.c ****         tmr->state = TIMER_STATE_STOPPED;
 206:..//kernel/core/tos_timer.c ****         timer_takeoff(tmr);
 207:..//kernel/core/tos_timer.c ****     }
 208:..//kernel/core/tos_timer.c **** 
 209:..//kernel/core/tos_timer.c ****     return K_ERR_NONE;
 210:..//kernel/core/tos_timer.c **** }
 211:..//kernel/core/tos_timer.c **** 
 212:..//kernel/core/tos_timer.c **** __STATIC__ k_err_t timer_change(k_timer_t *tmr, k_tick_t new_val, timer_change_type_t change_type)
 213:..//kernel/core/tos_timer.c **** {
  27              		.loc 1 213 1 view -0
  28              		.cfi_startproc
  29              		@ args = 4, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              		.loc 1 213 1 is_stmt 0 view .LVU1
  33 0000 D0B4     		push	{r4, r6, r7}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 12
  36              		.cfi_offset 4, -12
  37              		.cfi_offset 6, -8
  38              		.cfi_offset 7, -4
  39 0002 9DF80C40 		ldrb	r4, [sp, #12]	@ zero_extendqisi2
 214:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
  40              		.loc 1 214 5 is_stmt 1 view .LVU2
  41              		.loc 1 214 5 view .LVU3
  42 0006 50B3     		cbz	r0, .L6
  43 0008 1646     		mov	r6, r2
  44 000a 1F46     		mov	r7, r3
  45 000c 0346     		mov	r3, r0
 215:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
  46              		.loc 1 215 5 view .LVU4
  47              		.loc 1 215 5 view .LVU5
  48              	.LVL1:
  49              	.LBB38:
  50              	.LBI38:
  51              		.file 2 "..//kernel/core/include/tos_sys.h"
   1:..//kernel/core/include/tos_sys.h **** /*----------------------------------------------------------------------------
   2:..//kernel/core/include/tos_sys.h ****  * Tencent is pleased to support the open source community by making TencentOS
   3:..//kernel/core/include/tos_sys.h ****  * available.
   4:..//kernel/core/include/tos_sys.h ****  *
   5:..//kernel/core/include/tos_sys.h ****  * Copyright (C) 2019 THL A29 Limited, a Tencent company. All rights reserved.
   6:..//kernel/core/include/tos_sys.h ****  * If you have downloaded a copy of the TencentOS binary from Tencent, please
   7:..//kernel/core/include/tos_sys.h ****  * note that the TencentOS binary is licensed under the BSD 3-Clause License.
   8:..//kernel/core/include/tos_sys.h ****  *
   9:..//kernel/core/include/tos_sys.h ****  * If you have downloaded a copy of the TencentOS source code from Tencent,
  10:..//kernel/core/include/tos_sys.h ****  * please note that TencentOS source code is licensed under the BSD 3-Clause
  11:..//kernel/core/include/tos_sys.h ****  * License, except for the third-party components listed below which are
  12:..//kernel/core/include/tos_sys.h ****  * subject to different license terms. Your integration of TencentOS into your
  13:..//kernel/core/include/tos_sys.h ****  * own projects may require compliance with the BSD 3-Clause License, as well
  14:..//kernel/core/include/tos_sys.h ****  * as the other licenses applicable to the third-party components included
  15:..//kernel/core/include/tos_sys.h ****  * within TencentOS.
  16:..//kernel/core/include/tos_sys.h ****  *---------------------------------------------------------------------------*/
  17:..//kernel/core/include/tos_sys.h **** 
  18:..//kernel/core/include/tos_sys.h **** #ifndef _TOS_SYS_H_
  19:..//kernel/core/include/tos_sys.h **** #define  _TOS_SYS_H_
  20:..//kernel/core/include/tos_sys.h **** 
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 6


  21:..//kernel/core/include/tos_sys.h **** __CDECLS_BEGIN
  22:..//kernel/core/include/tos_sys.h **** 
  23:..//kernel/core/include/tos_sys.h **** #define K_NESTING_LIMIT_IRQ             (k_nesting_t)250u
  24:..//kernel/core/include/tos_sys.h **** #define K_NESTING_LIMIT_SCHED_LOCK      (k_nesting_t)250u
  25:..//kernel/core/include/tos_sys.h **** 
  26:..//kernel/core/include/tos_sys.h **** typedef enum knl_state_en {
  27:..//kernel/core/include/tos_sys.h ****     KNL_STATE_STOPPED,
  28:..//kernel/core/include/tos_sys.h ****     KNL_STATE_RUNNING,
  29:..//kernel/core/include/tos_sys.h **** } knl_state_t;
  30:..//kernel/core/include/tos_sys.h **** 
  31:..//kernel/core/include/tos_sys.h **** // some kind of magic number, mainly for identifing whether the object is initialized, or whether u
  32:..//kernel/core/include/tos_sys.h **** typedef enum knl_obj_type_en {
  33:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_NONE                           = 0x0000,
  34:..//kernel/core/include/tos_sys.h **** 
  35:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_BINARY_HEAP                    = 0xDAD0,
  36:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_BITMAP                         = 0xDAD1,
  37:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_CHAR_FIFO                      = 0xDAD2,
  38:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MMBLK_POOL                     = 0xDAD3,
  39:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MSG_QUEUE                      = 0xDAD4,
  40:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_PRIORITY_QUEUE                 = 0xDAD5,
  41:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_RING_QUEUE                     = 0xDAD6,
  42:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_STOPWATCH                      = 0xDAD7,
  43:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_TASK                           = 0xDAD8,
  44:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_TIMER                          = 0xDAD9,
  45:..//kernel/core/include/tos_sys.h **** 
  46:..//kernel/core/include/tos_sys.h ****     // ipc object
  47:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_BARRIER                        = 0x0BEE,
  48:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_COMPLETION                     = 0x1BEE,
  49:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_COUNTDOWNLATCH                 = 0x2BEE,
  50:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_EVENT                          = 0x3BEE,
  51:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MAIL_QUEUE                     = 0x4BEE,
  52:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MESSAGE_QUEUE                  = 0x5BEE,
  53:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_MUTEX                          = 0x6BEE,
  54:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_PRIORITY_MAIL_QUEUE            = 0x7BEE,
  55:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_PRIORITY_MESSAGE_QUEUE         = 0x8BEE,
  56:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_RWLOCK                         = 0x9BEE,
  57:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_TYPE_SEMAPHORE                      = 0xABEE,
  58:..//kernel/core/include/tos_sys.h **** } knl_obj_type_t;
  59:..//kernel/core/include/tos_sys.h **** 
  60:..//kernel/core/include/tos_sys.h **** typedef enum knl_obj_alloc_type_en {
  61:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_ALLOC_TYPE_NONE,
  62:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_ALLOC_TYPE_STATIC,
  63:..//kernel/core/include/tos_sys.h ****     KNL_OBJ_ALLOC_TYPE_DYNAMIC,
  64:..//kernel/core/include/tos_sys.h **** } knl_obj_alloc_type_t;
  65:..//kernel/core/include/tos_sys.h **** 
  66:..//kernel/core/include/tos_sys.h **** typedef struct knl_object_st {
  67:..//kernel/core/include/tos_sys.h ****     knl_obj_alloc_type_t    alloc_type; /* is dynamic allocated(using tos_mmheap) or static memory?
  68:..//kernel/core/include/tos_sys.h **** #if TOS_CFG_OBJECT_VERIFY_EN > 0u
  69:..//kernel/core/include/tos_sys.h ****     knl_obj_type_t          type;
  70:..//kernel/core/include/tos_sys.h **** #endif
  71:..//kernel/core/include/tos_sys.h **** } knl_obj_t;
  72:..//kernel/core/include/tos_sys.h **** 
  73:..//kernel/core/include/tos_sys.h **** /**
  74:..//kernel/core/include/tos_sys.h ****  * @brief Initialize the kernel.
  75:..//kernel/core/include/tos_sys.h ****  * initialize the tos tiny kernel.
  76:..//kernel/core/include/tos_sys.h ****  *
  77:..//kernel/core/include/tos_sys.h ****  * @attention None
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 7


  78:..//kernel/core/include/tos_sys.h ****  *
  79:..//kernel/core/include/tos_sys.h ****  * @param   None
  80:..//kernel/core/include/tos_sys.h ****  *
  81:..//kernel/core/include/tos_sys.h ****  * @return  errcode
  82:..//kernel/core/include/tos_sys.h ****  * @retval  Non-#K_ERR_NONE               return failed.
  83:..//kernel/core/include/tos_sys.h ****  * @retval  #K_ERR_NONE                   return successfully.
  84:..//kernel/core/include/tos_sys.h ****  */
  85:..//kernel/core/include/tos_sys.h **** __API__ k_err_t tos_knl_init(void);
  86:..//kernel/core/include/tos_sys.h **** 
  87:..//kernel/core/include/tos_sys.h **** /**
  88:..//kernel/core/include/tos_sys.h ****  * @brief Start the kernel.
  89:..//kernel/core/include/tos_sys.h ****  * get the kernel start to run, which means start the multitask scheduling.
  90:..//kernel/core/include/tos_sys.h ****  *
  91:..//kernel/core/include/tos_sys.h ****  * @attention None
  92:..//kernel/core/include/tos_sys.h ****  *
  93:..//kernel/core/include/tos_sys.h ****  * @param   None
  94:..//kernel/core/include/tos_sys.h ****  *
  95:..//kernel/core/include/tos_sys.h ****  * @return  errcode
  96:..//kernel/core/include/tos_sys.h ****  * @retval  #K_ERR_KNL_RUNNING            the kernel is already running.
  97:..//kernel/core/include/tos_sys.h ****  * @retval  #K_ERR_NONE                   return successfully.
  98:..//kernel/core/include/tos_sys.h ****  */
  99:..//kernel/core/include/tos_sys.h **** __API__ k_err_t tos_knl_start(void);
 100:..//kernel/core/include/tos_sys.h **** 
 101:..//kernel/core/include/tos_sys.h **** /**
 102:..//kernel/core/include/tos_sys.h ****  * @brief Get the kernel state.
 103:..//kernel/core/include/tos_sys.h ****  * whether the kernel is running.
 104:..//kernel/core/include/tos_sys.h ****  *
 105:..//kernel/core/include/tos_sys.h ****  * @attention None
 106:..//kernel/core/include/tos_sys.h ****  *
 107:..//kernel/core/include/tos_sys.h ****  * @param   None
 108:..//kernel/core/include/tos_sys.h ****  *
 109:..//kernel/core/include/tos_sys.h ****  * @return  whether the kernel is running.
 110:..//kernel/core/include/tos_sys.h ****  * @retval  Non-0                           the kernel is running.
 111:..//kernel/core/include/tos_sys.h ****  * @retval  0                               the kernel is not running.
 112:..//kernel/core/include/tos_sys.h ****  */
 113:..//kernel/core/include/tos_sys.h **** __API__ int     tos_knl_is_running(void);
 114:..//kernel/core/include/tos_sys.h **** 
 115:..//kernel/core/include/tos_sys.h **** /**
 116:..//kernel/core/include/tos_sys.h ****  * @brief Kernel enter the interrupt.
 117:..//kernel/core/include/tos_sys.h ****  * this function should be called in the entrance of a interrupt handler.
 118:..//kernel/core/include/tos_sys.h ****  *
 119:..//kernel/core/include/tos_sys.h ****  * @attention None
 120:..//kernel/core/include/tos_sys.h ****  *
 121:..//kernel/core/include/tos_sys.h ****  * @param   None
 122:..//kernel/core/include/tos_sys.h ****  *
 123:..//kernel/core/include/tos_sys.h ****  * @return  None
 124:..//kernel/core/include/tos_sys.h ****  */
 125:..//kernel/core/include/tos_sys.h **** __API__ void    tos_knl_irq_enter(void);
 126:..//kernel/core/include/tos_sys.h **** 
 127:..//kernel/core/include/tos_sys.h **** /**
 128:..//kernel/core/include/tos_sys.h ****  * @brief Kernel exit the interrupt.
 129:..//kernel/core/include/tos_sys.h ****  * this function should be called in the exit of a interrupt handler.
 130:..//kernel/core/include/tos_sys.h ****  *
 131:..//kernel/core/include/tos_sys.h ****  * @attention None
 132:..//kernel/core/include/tos_sys.h ****  *
 133:..//kernel/core/include/tos_sys.h ****  * @param   None
 134:..//kernel/core/include/tos_sys.h ****  *
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 8


 135:..//kernel/core/include/tos_sys.h ****  * @return  None
 136:..//kernel/core/include/tos_sys.h ****  */
 137:..//kernel/core/include/tos_sys.h **** __API__ void    tos_knl_irq_leave(void);
 138:..//kernel/core/include/tos_sys.h **** 
 139:..//kernel/core/include/tos_sys.h **** /**
 140:..//kernel/core/include/tos_sys.h ****  * @brief Lock the scheduler.
 141:..//kernel/core/include/tos_sys.h ****  * prevent the kernel from performing task schedule.
 142:..//kernel/core/include/tos_sys.h ****  *
 143:..//kernel/core/include/tos_sys.h ****  * @attention None
 144:..//kernel/core/include/tos_sys.h ****  *
 145:..//kernel/core/include/tos_sys.h ****  * @param   None
 146:..//kernel/core/include/tos_sys.h ****  *
 147:..//kernel/core/include/tos_sys.h ****  * @return  errcode
 148:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_KNL_NOT_RUNNING         the kernel is not running.
 149:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_LOCK_NESTING_OVERFLOW   the schedule lock nesting is overflow.
 150:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_NONE                    return successfully.
 151:..//kernel/core/include/tos_sys.h ****  */
 152:..//kernel/core/include/tos_sys.h **** __API__ k_err_t tos_knl_sched_lock(void);
 153:..//kernel/core/include/tos_sys.h **** 
 154:..//kernel/core/include/tos_sys.h **** /**
 155:..//kernel/core/include/tos_sys.h ****  * @brief Unlock the scheduler.
 156:..//kernel/core/include/tos_sys.h ****  * re-enable the task schedule.
 157:..//kernel/core/include/tos_sys.h ****  *
 158:..//kernel/core/include/tos_sys.h ****  * @attention None
 159:..//kernel/core/include/tos_sys.h ****  *
 160:..//kernel/core/include/tos_sys.h ****  * @param   None
 161:..//kernel/core/include/tos_sys.h ****  *
 162:..//kernel/core/include/tos_sys.h ****  * @return  errcode
 163:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_KNL_NOT_RUNNING         the kernel is not running.
 164:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_SCHED_NOT_LOCKED        the scheduler is not locked.
 165:..//kernel/core/include/tos_sys.h ****  * @retval  K_ERR_NONE                    return successfully.
 166:..//kernel/core/include/tos_sys.h ****  */
 167:..//kernel/core/include/tos_sys.h **** __API__ k_err_t tos_knl_sched_unlock(void);
 168:..//kernel/core/include/tos_sys.h **** 
 169:..//kernel/core/include/tos_sys.h **** #if TOS_CFG_TICKLESS_EN > 0u
 170:..//kernel/core/include/tos_sys.h **** __KNL__ k_tick_t knl_next_expires_get(void);
 171:..//kernel/core/include/tos_sys.h **** #endif
 172:..//kernel/core/include/tos_sys.h **** 
 173:..//kernel/core/include/tos_sys.h **** __KNL__ void    knl_sched(void);
 174:..//kernel/core/include/tos_sys.h **** __KNL__ int     knl_is_sched_locked(void);
 175:..//kernel/core/include/tos_sys.h **** __KNL__ int     knl_is_inirq(void);
 176:..//kernel/core/include/tos_sys.h **** __KNL__ int     knl_is_idle(k_task_t *task);
 177:..//kernel/core/include/tos_sys.h **** __KNL__ int     knl_is_self(k_task_t *task);
 178:..//kernel/core/include/tos_sys.h **** __KNL__ k_err_t knl_idle_init(void);
 179:..//kernel/core/include/tos_sys.h **** 
 180:..//kernel/core/include/tos_sys.h **** #if TOS_CFG_OBJECT_VERIFY_EN > 0u
 181:..//kernel/core/include/tos_sys.h **** 
 182:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ int knl_object_verify(knl_obj_t *knl_obj, knl_obj_type_t type)
  52              		.loc 2 182 31 view .LVU6
  53              	.LBB39:
 183:..//kernel/core/include/tos_sys.h **** {
 184:..//kernel/core/include/tos_sys.h ****     return knl_obj->type == type;
  54              		.loc 2 184 5 view .LVU7
  55              		.loc 2 184 19 is_stmt 0 view .LVU8
  56 000e 4088     		ldrh	r0, [r0, #2]
  57              	.LVL2:
  58              		.loc 2 184 19 view .LVU9
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 9


  59              	.LBE39:
  60              	.LBE38:
  61              		.loc 1 215 5 view .LVU10
  62 0010 4DF6D921 		movw	r1, #56025
  63 0014 8842     		cmp	r0, r1
  64 0016 25D1     		bne	.L7
 216:..//kernel/core/tos_timer.c **** 
 217:..//kernel/core/tos_timer.c ****     if (tmr->state == TIMER_STATE_UNUSED) {
  65              		.loc 1 217 5 is_stmt 1 view .LVU11
  66              		.loc 1 217 12 is_stmt 0 view .LVU12
  67 0018 93F83210 		ldrb	r1, [r3, #50]	@ zero_extendqisi2
  68              		.loc 1 217 8 view .LVU13
  69 001c 31B3     		cbz	r1, .L8
 218:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 219:..//kernel/core/tos_timer.c ****     }
 220:..//kernel/core/tos_timer.c **** 
 221:..//kernel/core/tos_timer.c ****     if (tmr->state == TIMER_STATE_RUNNING) {
  70              		.loc 1 221 5 is_stmt 1 view .LVU14
  71              		.loc 1 221 8 is_stmt 0 view .LVU15
  72 001e 0229     		cmp	r1, #2
  73 0020 27D0     		beq	.L9
 222:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_RUNNING;
 223:..//kernel/core/tos_timer.c ****     }
 224:..//kernel/core/tos_timer.c **** 
 225:..//kernel/core/tos_timer.c ****     if (tmr->opt == TOS_OPT_TIMER_ONESHOT &&
  74              		.loc 1 225 5 is_stmt 1 view .LVU16
  75              		.loc 1 225 12 is_stmt 0 view .LVU17
  76 0022 1A8E     		ldrh	r2, [r3, #48]
  77              	.LVL3:
  78              		.loc 1 225 8 view .LVU18
  79 0024 012A     		cmp	r2, #1
  80 0026 06D0     		beq	.L13
  81              	.L3:
 226:..//kernel/core/tos_timer.c ****         change_type == TIMER_CHANGE_TYPE_DELAY &&
 227:..//kernel/core/tos_timer.c ****         new_val == (k_tick_t)0u) {
 228:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INVALID_DELAY;
 229:..//kernel/core/tos_timer.c ****     }
 230:..//kernel/core/tos_timer.c **** 
 231:..//kernel/core/tos_timer.c ****     if (tmr->opt == TOS_OPT_TIMER_PERIODIC &&
  82              		.loc 1 231 5 is_stmt 1 view .LVU19
  83              		.loc 1 231 8 is_stmt 0 view .LVU20
  84 0028 022A     		cmp	r2, #2
  85 002a 0CD0     		beq	.L14
  86              	.L4:
 232:..//kernel/core/tos_timer.c ****         change_type == TIMER_CHANGE_TYPE_PERIOD &&
 233:..//kernel/core/tos_timer.c ****         new_val == (k_tick_t)0u) {
 234:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INVALID_PERIOD;
 235:..//kernel/core/tos_timer.c ****     }
 236:..//kernel/core/tos_timer.c **** 
 237:..//kernel/core/tos_timer.c ****     if (change_type == TIMER_CHANGE_TYPE_DELAY) {
  87              		.loc 1 237 5 is_stmt 1 view .LVU21
  88              		.loc 1 237 8 is_stmt 0 view .LVU22
  89 002c 9CB9     		cbnz	r4, .L5
 238:..//kernel/core/tos_timer.c ****         tmr->delay  = new_val;
  90              		.loc 1 238 9 is_stmt 1 view .LVU23
  91              		.loc 1 238 21 is_stmt 0 view .LVU24
  92 002e C3E90867 		strd	r6, [r3, #32]
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 10


 239:..//kernel/core/tos_timer.c ****     } else {
 240:..//kernel/core/tos_timer.c ****         tmr->period = new_val;
 241:..//kernel/core/tos_timer.c ****     }
 242:..//kernel/core/tos_timer.c **** 
 243:..//kernel/core/tos_timer.c ****     return K_ERR_NONE;
  93              		.loc 1 243 12 view .LVU25
  94 0032 0020     		movs	r0, #0
  95 0034 18E0     		b	.L2
  96              	.L13:
 225:..//kernel/core/tos_timer.c ****         change_type == TIMER_CHANGE_TYPE_DELAY &&
  97              		.loc 1 225 43 discriminator 1 view .LVU26
  98 0036 002C     		cmp	r4, #0
  99 0038 F6D1     		bne	.L3
 226:..//kernel/core/tos_timer.c ****         new_val == (k_tick_t)0u) {
 100              		.loc 1 226 48 view .LVU27
 101 003a 56EA0701 		orrs	r1, r6, r7
 102 003e F3D1     		bne	.L3
 228:..//kernel/core/tos_timer.c ****     }
 103              		.loc 1 228 16 view .LVU28
 104 0040 40F63700 		movw	r0, #2103
 105 0044 10E0     		b	.L2
 106              	.L14:
 231:..//kernel/core/tos_timer.c ****         change_type == TIMER_CHANGE_TYPE_PERIOD &&
 107              		.loc 1 231 44 discriminator 1 view .LVU29
 108 0046 012C     		cmp	r4, #1
 109 0048 F0D1     		bne	.L4
 232:..//kernel/core/tos_timer.c ****         new_val == (k_tick_t)0u) {
 110              		.loc 1 232 49 view .LVU30
 111 004a 56EA0702 		orrs	r2, r6, r7
 112 004e EDD1     		bne	.L4
 234:..//kernel/core/tos_timer.c ****     }
 113              		.loc 1 234 16 view .LVU31
 114 0050 40F63800 		movw	r0, #2104
 115 0054 08E0     		b	.L2
 116              	.L5:
 240:..//kernel/core/tos_timer.c ****     }
 117              		.loc 1 240 9 is_stmt 1 view .LVU32
 240:..//kernel/core/tos_timer.c ****     }
 118              		.loc 1 240 21 is_stmt 0 view .LVU33
 119 0056 C3E90A67 		strd	r6, [r3, #40]
 120              		.loc 1 243 12 view .LVU34
 121 005a 0020     		movs	r0, #0
 122 005c 04E0     		b	.L2
 123              	.LVL4:
 124              	.L6:
 214:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 125              		.loc 1 214 5 view .LVU35
 126 005e 40F24C40 		movw	r0, #1100
 127              	.LVL5:
 214:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 128              		.loc 1 214 5 view .LVU36
 129 0062 01E0     		b	.L2
 130              	.LVL6:
 131              	.L7:
 215:..//kernel/core/tos_timer.c **** 
 132              		.loc 1 215 5 view .LVU37
 133 0064 40F24D40 		movw	r0, #1101
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 11


 134              	.LVL7:
 135              	.L2:
 244:..//kernel/core/tos_timer.c **** }
 136              		.loc 1 244 1 view .LVU38
 137 0068 D0BC     		pop	{r4, r6, r7}
 138              	.LCFI1:
 139              		.cfi_remember_state
 140              		.cfi_restore 7
 141              		.cfi_restore 6
 142              		.cfi_restore 4
 143              		.cfi_def_cfa_offset 0
 144              	.LVL8:
 145              		.loc 1 244 1 view .LVU39
 146 006a 7047     		bx	lr
 147              	.LVL9:
 148              	.L8:
 149              	.LCFI2:
 150              		.cfi_restore_state
 218:..//kernel/core/tos_timer.c ****     }
 151              		.loc 1 218 16 view .LVU40
 152 006c 40F63400 		movw	r0, #2100
 153 0070 FAE7     		b	.L2
 154              	.L9:
 222:..//kernel/core/tos_timer.c ****     }
 155              		.loc 1 222 16 view .LVU41
 156 0072 40F63C00 		movw	r0, #2108
 157 0076 F7E7     		b	.L2
 158              		.cfi_endproc
 159              	.LFE117:
 161              		.section	.text.timer_takeoff,"ax",%progbits
 162              		.align	1
 163              		.syntax unified
 164              		.thumb
 165              		.thumb_func
 166              		.fpu softvfp
 168              	timer_takeoff:
 169              	.LVL10:
 170              	.LFB111:
  59:..//kernel/core/tos_timer.c ****     TOS_CPU_CPSR_ALLOC();
 171              		.loc 1 59 1 is_stmt 1 view -0
 172              		.cfi_startproc
 173              		@ args = 0, pretend = 0, frame = 0
 174              		@ frame_needed = 0, uses_anonymous_args = 0
  59:..//kernel/core/tos_timer.c ****     TOS_CPU_CPSR_ALLOC();
 175              		.loc 1 59 1 is_stmt 0 view .LVU43
 176 0000 38B5     		push	{r3, r4, r5, lr}
 177              	.LCFI3:
 178              		.cfi_def_cfa_offset 16
 179              		.cfi_offset 3, -16
 180              		.cfi_offset 4, -12
 181              		.cfi_offset 5, -8
 182              		.cfi_offset 14, -4
 183 0002 0446     		mov	r4, r0
  60:..//kernel/core/tos_timer.c ****     k_timer_t *first, *next;
 184              		.loc 1 60 5 is_stmt 1 view .LVU44
 185              	.LVL11:
  61:..//kernel/core/tos_timer.c **** 
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 12


 186              		.loc 1 61 5 view .LVU45
  63:..//kernel/core/tos_timer.c **** 
 187              		.loc 1 63 5 view .LVU46
  63:..//kernel/core/tos_timer.c **** 
 188              		.loc 1 63 5 view .LVU47
 189 0004 FFF7FEFF 		bl	tos_cpu_cpsr_save
 190              	.LVL12:
  65:..//kernel/core/tos_timer.c **** 
 191              		.loc 1 65 5 view .LVU48
  65:..//kernel/core/tos_timer.c **** 
 192              		.loc 1 65 13 is_stmt 0 view .LVU49
 193 0008 104B     		ldr	r3, .L21
 194 000a 9B68     		ldr	r3, [r3, #8]
  65:..//kernel/core/tos_timer.c **** 
 195              		.loc 1 65 11 view .LVU50
 196 000c 0C3B     		subs	r3, r3, #12
 197              	.LVL13:
  67:..//kernel/core/tos_timer.c **** 
 198              		.loc 1 67 5 is_stmt 1 view .LVU51
 199              	.LBB40:
 200              	.LBI40:
 201              		.file 3 "..//kernel/core/include/tos_list.h"
   1:..//kernel/core/include/tos_list.h **** /*----------------------------------------------------------------------------
   2:..//kernel/core/include/tos_list.h ****  * Tencent is pleased to support the open source community by making TencentOS
   3:..//kernel/core/include/tos_list.h ****  * available.
   4:..//kernel/core/include/tos_list.h ****  *
   5:..//kernel/core/include/tos_list.h ****  * Copyright (C) 2019 THL A29 Limited, a Tencent company. All rights reserved.
   6:..//kernel/core/include/tos_list.h ****  * If you have downloaded a copy of the TencentOS binary from Tencent, please
   7:..//kernel/core/include/tos_list.h ****  * note that the TencentOS binary is licensed under the BSD 3-Clause License.
   8:..//kernel/core/include/tos_list.h ****  *
   9:..//kernel/core/include/tos_list.h ****  * If you have downloaded a copy of the TencentOS source code from Tencent,
  10:..//kernel/core/include/tos_list.h ****  * please note that TencentOS source code is licensed under the BSD 3-Clause
  11:..//kernel/core/include/tos_list.h ****  * License, except for the third-party components listed below which are
  12:..//kernel/core/include/tos_list.h ****  * subject to different license terms. Your integration of TencentOS into your
  13:..//kernel/core/include/tos_list.h ****  * own projects may require compliance with the BSD 3-Clause License, as well
  14:..//kernel/core/include/tos_list.h ****  * as the other licenses applicable to the third-party components included
  15:..//kernel/core/include/tos_list.h ****  * within TencentOS.
  16:..//kernel/core/include/tos_list.h ****  *---------------------------------------------------------------------------*/
  17:..//kernel/core/include/tos_list.h **** 
  18:..//kernel/core/include/tos_list.h **** #ifndef _TOS_LIST_H_
  19:..//kernel/core/include/tos_list.h **** #define  _TOS_LIST_H_
  20:..//kernel/core/include/tos_list.h **** 
  21:..//kernel/core/include/tos_list.h **** __CDECLS_BEGIN
  22:..//kernel/core/include/tos_list.h **** 
  23:..//kernel/core/include/tos_list.h **** typedef struct k_list_node_st {
  24:..//kernel/core/include/tos_list.h ****     struct k_list_node_st *next;
  25:..//kernel/core/include/tos_list.h ****     struct k_list_node_st *prev;
  26:..//kernel/core/include/tos_list.h **** } k_list_t;
  27:..//kernel/core/include/tos_list.h **** 
  28:..//kernel/core/include/tos_list.h **** #define TOS_LIST_NODE(node) \
  29:..//kernel/core/include/tos_list.h ****     { &(node), &(node) }
  30:..//kernel/core/include/tos_list.h **** 
  31:..//kernel/core/include/tos_list.h **** #define TOS_LIST_DEFINE(list) \
  32:..//kernel/core/include/tos_list.h ****     k_list_t list = { &(list), &(list) }
  33:..//kernel/core/include/tos_list.h **** 
  34:..//kernel/core/include/tos_list.h **** #define TOS_LIST_ENTRY(node, type, field) \
  35:..//kernel/core/include/tos_list.h ****     TOS_CONTAINER_OF_FIELD(node, type, field)
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 13


  36:..//kernel/core/include/tos_list.h **** 
  37:..//kernel/core/include/tos_list.h **** #define TOS_LIST_FIRST_ENTRY(list, type, field) \
  38:..//kernel/core/include/tos_list.h ****     TOS_LIST_ENTRY((list)->next, type, field)
  39:..//kernel/core/include/tos_list.h **** 
  40:..//kernel/core/include/tos_list.h **** #define TOS_LIST_FIRST_ENTRY_OR_NULL(list, type, field) \
  41:..//kernel/core/include/tos_list.h ****     (tos_list_empty(list) ? K_NULL : TOS_LIST_FIRST_ENTRY(list, type, field))
  42:..//kernel/core/include/tos_list.h **** 
  43:..//kernel/core/include/tos_list.h **** #define TOS_LIST_FOR_EACH(curr, list) \
  44:..//kernel/core/include/tos_list.h ****     for (curr = (list)->next; curr != (list); curr = curr->next)
  45:..//kernel/core/include/tos_list.h **** 
  46:..//kernel/core/include/tos_list.h **** #define TOS_LIST_FOR_EACH_PREV(curr, list) \
  47:..//kernel/core/include/tos_list.h ****     for (curr = (list)->prev; curr != (list); curr = curr->prev)
  48:..//kernel/core/include/tos_list.h **** 
  49:..//kernel/core/include/tos_list.h **** #define TOS_LIST_FOR_EACH_SAFE(curr, next, list) \
  50:..//kernel/core/include/tos_list.h ****     for (curr = (list)->next, next = curr->next; curr != (list); \
  51:..//kernel/core/include/tos_list.h ****             curr = next, next = curr->next)
  52:..//kernel/core/include/tos_list.h **** 
  53:..//kernel/core/include/tos_list.h **** #define TOS_LIST_FOR_EACH_PREV_SAFE(curr, next, list) \
  54:..//kernel/core/include/tos_list.h ****     for (curr = (list)->prev, next = curr->prev; \
  55:..//kernel/core/include/tos_list.h ****             curr != (list); \
  56:..//kernel/core/include/tos_list.h ****             curr = next, next = curr->prev)
  57:..//kernel/core/include/tos_list.h **** 
  58:..//kernel/core/include/tos_list.h **** #define TOS_LIST_FOR_EACH_ENTRY(entry, type, field, list) \
  59:..//kernel/core/include/tos_list.h ****     for (entry = TOS_LIST_ENTRY((list)->next, type, field); \
  60:..//kernel/core/include/tos_list.h ****         &entry->field != (list); \
  61:..//kernel/core/include/tos_list.h ****         entry = TOS_LIST_ENTRY(entry->field.next, type, field))
  62:..//kernel/core/include/tos_list.h **** 
  63:..//kernel/core/include/tos_list.h **** #define TOS_LIST_FOR_EACH_ENTRY_REVERSE(entry, type, field, list) \
  64:..//kernel/core/include/tos_list.h ****     for (entry = TOS_LIST_ENTRY((list)->prev, type, field); \
  65:..//kernel/core/include/tos_list.h ****             &entry->field != (list); \
  66:..//kernel/core/include/tos_list.h ****             entry = TOS_LIST_ENTRY(entry->field.prev, type, field))
  67:..//kernel/core/include/tos_list.h **** 
  68:..//kernel/core/include/tos_list.h **** #define TOS_LIST_FOR_EACH_ENTRY_SAFE(entry, tmp, type, field, list) \
  69:..//kernel/core/include/tos_list.h ****     for (entry = TOS_LIST_ENTRY((list)->next, type, field), \
  70:..//kernel/core/include/tos_list.h ****             tmp = TOS_LIST_ENTRY(entry->field.next, type, field); \
  71:..//kernel/core/include/tos_list.h ****             &entry->field != (list); \
  72:..//kernel/core/include/tos_list.h ****             entry = tmp, tmp = TOS_LIST_ENTRY(entry->field.next, type, field))
  73:..//kernel/core/include/tos_list.h **** 
  74:..//kernel/core/include/tos_list.h **** #define TOS_LIST_FOR_EACH_ENTRY_SAFE_REVERSE(entry, tmp, type, field, list) \
  75:..//kernel/core/include/tos_list.h ****     for (entry = TOS_LIST_ENTRY((list)->prev, type, field), \
  76:..//kernel/core/include/tos_list.h ****             tmp = TOS_LIST_ENTRY(entry->field.prev, type, field); \
  77:..//kernel/core/include/tos_list.h ****             &entry->field != (list); \
  78:..//kernel/core/include/tos_list.h ****             entry = tmp, tmp = TOS_LIST_ENTRY(entry->field.prev, type, field))
  79:..//kernel/core/include/tos_list.h **** 
  80:..//kernel/core/include/tos_list.h **** __STATIC_INLINE__ void _list_add(k_list_t *node, k_list_t *prev, k_list_t *next)
  81:..//kernel/core/include/tos_list.h **** {
  82:..//kernel/core/include/tos_list.h ****     next->prev = node;
  83:..//kernel/core/include/tos_list.h ****     node->next = next;
  84:..//kernel/core/include/tos_list.h ****     node->prev = prev;
  85:..//kernel/core/include/tos_list.h ****     prev->next = node;
  86:..//kernel/core/include/tos_list.h **** }
  87:..//kernel/core/include/tos_list.h **** 
  88:..//kernel/core/include/tos_list.h **** __STATIC_INLINE__ void _list_del(k_list_t *prev, k_list_t *next)
  89:..//kernel/core/include/tos_list.h **** {
  90:..//kernel/core/include/tos_list.h ****     next->prev = prev;
  91:..//kernel/core/include/tos_list.h ****     prev->next = next;
  92:..//kernel/core/include/tos_list.h **** }
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 14


  93:..//kernel/core/include/tos_list.h **** 
  94:..//kernel/core/include/tos_list.h **** __STATIC_INLINE__ void _list_del_node(k_list_t *node)
  95:..//kernel/core/include/tos_list.h **** {
  96:..//kernel/core/include/tos_list.h ****     _list_del(node->prev, node->next);
  97:..//kernel/core/include/tos_list.h **** }
  98:..//kernel/core/include/tos_list.h **** 
  99:..//kernel/core/include/tos_list.h **** __API__ __STATIC_INLINE__ void tos_list_init(k_list_t *list)
 100:..//kernel/core/include/tos_list.h **** {
 101:..//kernel/core/include/tos_list.h ****     list->next = list;
 102:..//kernel/core/include/tos_list.h ****     list->prev = list;
 103:..//kernel/core/include/tos_list.h **** }
 104:..//kernel/core/include/tos_list.h **** 
 105:..//kernel/core/include/tos_list.h **** __API__ __STATIC_INLINE__ void tos_list_add(k_list_t *node, k_list_t *list)
 106:..//kernel/core/include/tos_list.h **** {
 107:..//kernel/core/include/tos_list.h ****     _list_add(node, list, list->next);
 108:..//kernel/core/include/tos_list.h **** }
 109:..//kernel/core/include/tos_list.h **** 
 110:..//kernel/core/include/tos_list.h **** __API__ __STATIC_INLINE__ void tos_list_add_tail(k_list_t *node, k_list_t *list)
 111:..//kernel/core/include/tos_list.h **** {
 112:..//kernel/core/include/tos_list.h ****     _list_add(node, list->prev, list);
 113:..//kernel/core/include/tos_list.h **** }
 114:..//kernel/core/include/tos_list.h **** 
 115:..//kernel/core/include/tos_list.h **** __API__ __STATIC_INLINE__ void tos_list_del(k_list_t *node)
 202              		.loc 3 115 32 view .LVU52
 203              	.LBB41:
 116:..//kernel/core/include/tos_list.h **** {
 117:..//kernel/core/include/tos_list.h ****     _list_del(node->prev, node->next);
 204              		.loc 3 117 5 view .LVU53
 205              		.loc 3 117 19 is_stmt 0 view .LVU54
 206 000e 2269     		ldr	r2, [r4, #16]
 207              		.loc 3 117 31 view .LVU55
 208 0010 E168     		ldr	r1, [r4, #12]
 209              	.LVL14:
 210              	.LBB42:
 211              	.LBI42:
  88:..//kernel/core/include/tos_list.h **** {
 212              		.loc 3 88 24 is_stmt 1 view .LVU56
 213              	.LBB43:
  90:..//kernel/core/include/tos_list.h ****     prev->next = next;
 214              		.loc 3 90 5 view .LVU57
  90:..//kernel/core/include/tos_list.h ****     prev->next = next;
 215              		.loc 3 90 16 is_stmt 0 view .LVU58
 216 0012 4A60     		str	r2, [r1, #4]
  91:..//kernel/core/include/tos_list.h **** }
 217              		.loc 3 91 5 is_stmt 1 view .LVU59
  91:..//kernel/core/include/tos_list.h **** }
 218              		.loc 3 91 16 is_stmt 0 view .LVU60
 219 0014 1160     		str	r1, [r2]
 220              	.LVL15:
  91:..//kernel/core/include/tos_list.h **** }
 221              		.loc 3 91 16 view .LVU61
 222              	.LBE43:
 223              	.LBE42:
 224              	.LBE41:
 225              	.LBE40:
  69:..//kernel/core/tos_timer.c ****         // if the first guy removed, we need to refresh k_timer_ctl.next_expires
 226              		.loc 1 69 5 is_stmt 1 view .LVU62
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 15


  69:..//kernel/core/tos_timer.c ****         // if the first guy removed, we need to refresh k_timer_ctl.next_expires
 227              		.loc 1 69 8 is_stmt 0 view .LVU63
 228 0016 A342     		cmp	r3, r4
 229 0018 02D0     		beq	.L20
 230              	.LVL16:
 231              	.L16:
  80:..//kernel/core/tos_timer.c **** }
 232              		.loc 1 80 5 is_stmt 1 view .LVU64
  80:..//kernel/core/tos_timer.c **** }
 233              		.loc 1 80 5 view .LVU65
 234 001a FFF7FEFF 		bl	tos_cpu_cpsr_restore
 235              	.LVL17:
  81:..//kernel/core/tos_timer.c **** 
 236              		.loc 1 81 1 is_stmt 0 view .LVU66
 237 001e 38BD     		pop	{r3, r4, r5, pc}
 238              	.LVL18:
 239              	.L20:
  71:..//kernel/core/tos_timer.c ****         if (!next) {
 240              		.loc 1 71 9 is_stmt 1 view .LVU67
  71:..//kernel/core/tos_timer.c ****         if (!next) {
 241              		.loc 1 71 16 is_stmt 0 view .LVU68
 242 0020 04F10C02 		add	r2, r4, #12
 243              	.LVL19:
 244              	.LBB44:
 245              	.LBI44:
 118:..//kernel/core/include/tos_list.h **** }
 119:..//kernel/core/include/tos_list.h **** 
 120:..//kernel/core/include/tos_list.h **** __API__ __STATIC_INLINE__ void tos_list_del_init(k_list_t *node)
 121:..//kernel/core/include/tos_list.h **** {
 122:..//kernel/core/include/tos_list.h ****     _list_del_node(node);
 123:..//kernel/core/include/tos_list.h ****     tos_list_init(node);
 124:..//kernel/core/include/tos_list.h **** }
 125:..//kernel/core/include/tos_list.h **** 
 126:..//kernel/core/include/tos_list.h **** __API__ __STATIC_INLINE__ void tos_list_move(k_list_t *node, k_list_t *list)
 127:..//kernel/core/include/tos_list.h **** {
 128:..//kernel/core/include/tos_list.h ****     _list_del_node(node);
 129:..//kernel/core/include/tos_list.h ****     tos_list_add(node, list);
 130:..//kernel/core/include/tos_list.h **** }
 131:..//kernel/core/include/tos_list.h **** 
 132:..//kernel/core/include/tos_list.h **** __API__ __STATIC_INLINE__ void tos_list_move_tail(k_list_t *node, k_list_t *list)
 133:..//kernel/core/include/tos_list.h **** {
 134:..//kernel/core/include/tos_list.h ****     _list_del_node(node);
 135:..//kernel/core/include/tos_list.h ****     tos_list_add_tail(node, list);
 136:..//kernel/core/include/tos_list.h **** }
 137:..//kernel/core/include/tos_list.h **** 
 138:..//kernel/core/include/tos_list.h **** __API__ __STATIC_INLINE__ int tos_list_empty(const k_list_t *list)
 246              		.loc 3 138 31 is_stmt 1 view .LVU69
 247              	.LBB45:
 139:..//kernel/core/include/tos_list.h **** {
 140:..//kernel/core/include/tos_list.h ****     return list->next == list;
 248              		.loc 3 140 5 view .LVU70
 249              		.loc 3 140 16 is_stmt 0 view .LVU71
 250 0024 E368     		ldr	r3, [r4, #12]
 251              	.LVL20:
 252              		.loc 3 140 16 view .LVU72
 253              	.LBE45:
 254              	.LBE44:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 16


  71:..//kernel/core/tos_timer.c ****         if (!next) {
 255              		.loc 1 71 16 view .LVU73
 256 0026 9A42     		cmp	r2, r3
 257 0028 07D0     		beq	.L17
 258              	.LVL21:
  72:..//kernel/core/tos_timer.c ****             // the only guy removed
 259              		.loc 1 72 9 is_stmt 1 discriminator 1 view .LVU74
  72:..//kernel/core/tos_timer.c ****             // the only guy removed
 260              		.loc 1 72 12 is_stmt 0 discriminator 1 view .LVU75
 261 002a 0C3B     		subs	r3, r3, #12
 262              	.LVL22:
  72:..//kernel/core/tos_timer.c ****             // the only guy removed
 263              		.loc 1 72 12 discriminator 1 view .LVU76
 264 002c 05D0     		beq	.L17
  76:..//kernel/core/tos_timer.c ****         }
 265              		.loc 1 76 13 is_stmt 1 view .LVU77
  76:..//kernel/core/tos_timer.c ****         }
 266              		.loc 1 76 44 is_stmt 0 view .LVU78
 267 002e D3E90645 		ldrd	r4, [r3, #24]
 268              	.LVL23:
  76:..//kernel/core/tos_timer.c ****         }
 269              		.loc 1 76 38 view .LVU79
 270 0032 064B     		ldr	r3, .L21
 271              	.LVL24:
  76:..//kernel/core/tos_timer.c ****         }
 272              		.loc 1 76 38 view .LVU80
 273 0034 C3E90045 		strd	r4, [r3]
 274 0038 EFE7     		b	.L16
 275              	.LVL25:
 276              	.L17:
  74:..//kernel/core/tos_timer.c ****         } else {
 277              		.loc 1 74 13 is_stmt 1 view .LVU81
  74:..//kernel/core/tos_timer.c ****         } else {
 278              		.loc 1 74 38 is_stmt 0 view .LVU82
 279 003a 044B     		ldr	r3, .L21
 280 003c 4FF0FF34 		mov	r4, #-1
 281              	.LVL26:
  74:..//kernel/core/tos_timer.c ****         } else {
 282              		.loc 1 74 38 view .LVU83
 283 0040 4FF0FF35 		mov	r5, #-1
 284 0044 C3E90045 		strd	r4, [r3]
 285 0048 E7E7     		b	.L16
 286              	.L22:
 287 004a 00BF     		.align	2
 288              	.L21:
 289 004c 00000000 		.word	k_timer_ctl
 290              		.cfi_endproc
 291              	.LFE111:
 293              		.section	.text.timer_place,"ax",%progbits
 294              		.align	1
 295              		.syntax unified
 296              		.thumb
 297              		.thumb_func
 298              		.fpu softvfp
 300              	timer_place:
 301              	.LVL27:
 302              	.LFB110:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 17


  23:..//kernel/core/tos_timer.c ****     TOS_CPU_CPSR_ALLOC();
 303              		.loc 1 23 1 is_stmt 1 view -0
 304              		.cfi_startproc
 305              		@ args = 0, pretend = 0, frame = 0
 306              		@ frame_needed = 0, uses_anonymous_args = 0
  23:..//kernel/core/tos_timer.c ****     TOS_CPU_CPSR_ALLOC();
 307              		.loc 1 23 1 is_stmt 0 view .LVU85
 308 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 309              	.LCFI4:
 310              		.cfi_def_cfa_offset 24
 311              		.cfi_offset 4, -24
 312              		.cfi_offset 5, -20
 313              		.cfi_offset 6, -16
 314              		.cfi_offset 7, -12
 315              		.cfi_offset 8, -8
 316              		.cfi_offset 14, -4
 317 0004 8046     		mov	r8, r0
  24:..//kernel/core/tos_timer.c ****     k_timer_t *iter = K_NULL;
 318              		.loc 1 24 5 is_stmt 1 view .LVU86
 319              	.LVL28:
  25:..//kernel/core/tos_timer.c **** 
 320              		.loc 1 25 5 view .LVU87
  27:..//kernel/core/tos_timer.c **** 
 321              		.loc 1 27 5 view .LVU88
  27:..//kernel/core/tos_timer.c **** 
 322              		.loc 1 27 5 view .LVU89
 323 0006 FFF7FEFF 		bl	tos_cpu_cpsr_save
 324              	.LVL29:
  29:..//kernel/core/tos_timer.c **** 
 325              		.loc 1 29 5 view .LVU90
  29:..//kernel/core/tos_timer.c **** 
 326              		.loc 1 29 18 is_stmt 0 view .LVU91
 327 000a 1A49     		ldr	r1, .L30
 328 000c D8F81830 		ldr	r3, [r8, #24]
 329 0010 D8F81C60 		ldr	r6, [r8, #28]
 330 0014 0A68     		ldr	r2, [r1]
 331 0016 4968     		ldr	r1, [r1, #4]
 332 0018 9C18     		adds	r4, r3, r2
 333 001a 46EB0105 		adc	r5, r6, r1
 334 001e C8E90645 		strd	r4, [r8, #24]
  31:..//kernel/core/tos_timer.c ****         if (tmr->expires < iter->expires) {
 335              		.loc 1 31 5 is_stmt 1 view .LVU92
 336 0022 154B     		ldr	r3, .L30+4
 337 0024 9B68     		ldr	r3, [r3, #8]
 338 0026 0C3B     		subs	r3, r3, #12
 339              	.LVL30:
 340              	.L24:
  31:..//kernel/core/tos_timer.c ****         if (tmr->expires < iter->expires) {
 341              		.loc 1 31 5 is_stmt 0 discriminator 1 view .LVU93
 342 0028 03F10C02 		add	r2, r3, #12
 343 002c 1349     		ldr	r1, .L30+8
 344 002e 8A42     		cmp	r2, r1
 345 0030 08D0     		beq	.L25
  32:..//kernel/core/tos_timer.c ****             break;
 346              		.loc 1 32 9 is_stmt 1 view .LVU94
  32:..//kernel/core/tos_timer.c ****             break;
 347              		.loc 1 32 32 is_stmt 0 view .LVU95
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 18


 348 0032 D3E90667 		ldrd	r6, [r3, #24]
  32:..//kernel/core/tos_timer.c ****             break;
 349              		.loc 1 32 12 view .LVU96
 350 0036 BD42     		cmp	r5, r7
 351 0038 08BF     		it	eq
 352 003a B442     		cmpeq	r4, r6
 353 003c 02D3     		bcc	.L25
  31:..//kernel/core/tos_timer.c ****         if (tmr->expires < iter->expires) {
 354              		.loc 1 31 5 discriminator 2 view .LVU97
 355 003e DB68     		ldr	r3, [r3, #12]
 356              	.LVL31:
  31:..//kernel/core/tos_timer.c ****         if (tmr->expires < iter->expires) {
 357              		.loc 1 31 5 discriminator 2 view .LVU98
 358 0040 0C3B     		subs	r3, r3, #12
 359              	.LVL32:
  31:..//kernel/core/tos_timer.c ****         if (tmr->expires < iter->expires) {
 360              		.loc 1 31 5 discriminator 2 view .LVU99
 361 0042 F1E7     		b	.L24
 362              	.L25:
  36:..//kernel/core/tos_timer.c **** 
 363              		.loc 1 36 5 is_stmt 1 view .LVU100
 364 0044 08F10C01 		add	r1, r8, #12
 365              	.LVL33:
 366              	.LBB46:
 367              	.LBI46:
 110:..//kernel/core/include/tos_list.h **** {
 368              		.loc 3 110 32 view .LVU101
 369              	.LBB47:
 112:..//kernel/core/include/tos_list.h **** }
 370              		.loc 3 112 5 view .LVU102
 112:..//kernel/core/include/tos_list.h **** }
 371              		.loc 3 112 25 is_stmt 0 view .LVU103
 372 0048 1C69     		ldr	r4, [r3, #16]
 373              	.LVL34:
 374              	.LBB48:
 375              	.LBI48:
  80:..//kernel/core/include/tos_list.h **** {
 376              		.loc 3 80 24 is_stmt 1 view .LVU104
 377              	.LBB49:
  82:..//kernel/core/include/tos_list.h ****     node->next = next;
 378              		.loc 3 82 5 view .LVU105
  82:..//kernel/core/include/tos_list.h ****     node->next = next;
 379              		.loc 3 82 16 is_stmt 0 view .LVU106
 380 004a 1961     		str	r1, [r3, #16]
  83:..//kernel/core/include/tos_list.h ****     node->prev = prev;
 381              		.loc 3 83 5 is_stmt 1 view .LVU107
  83:..//kernel/core/include/tos_list.h ****     node->prev = prev;
 382              		.loc 3 83 16 is_stmt 0 view .LVU108
 383 004c C8F80C20 		str	r2, [r8, #12]
  84:..//kernel/core/include/tos_list.h ****     prev->next = node;
 384              		.loc 3 84 5 is_stmt 1 view .LVU109
  84:..//kernel/core/include/tos_list.h ****     prev->next = node;
 385              		.loc 3 84 16 is_stmt 0 view .LVU110
 386 0050 C8F81040 		str	r4, [r8, #16]
  85:..//kernel/core/include/tos_list.h **** }
 387              		.loc 3 85 5 is_stmt 1 view .LVU111
  85:..//kernel/core/include/tos_list.h **** }
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 19


 388              		.loc 3 85 16 is_stmt 0 view .LVU112
 389 0054 2160     		str	r1, [r4]
 390              	.LVL35:
  85:..//kernel/core/include/tos_list.h **** }
 391              		.loc 3 85 16 view .LVU113
 392              	.LBE49:
 393              	.LBE48:
 394              	.LBE47:
 395              	.LBE46:
  38:..//kernel/core/tos_timer.c ****         // we are the first guy now
 396              		.loc 1 38 5 is_stmt 1 view .LVU114
  38:..//kernel/core/tos_timer.c ****         // we are the first guy now
 397              		.loc 1 38 25 is_stmt 0 view .LVU115
 398 0056 084B     		ldr	r3, .L30+4
 399              	.LVL36:
  38:..//kernel/core/tos_timer.c ****         // we are the first guy now
 400              		.loc 1 38 25 view .LVU116
 401 0058 9B68     		ldr	r3, [r3, #8]
  38:..//kernel/core/tos_timer.c ****         // we are the first guy now
 402              		.loc 1 38 8 view .LVU117
 403 005a 9942     		cmp	r1, r3
 404 005c 03D0     		beq	.L29
 405              	.L27:
  55:..//kernel/core/tos_timer.c **** }
 406              		.loc 1 55 5 is_stmt 1 view .LVU118
  55:..//kernel/core/tos_timer.c **** }
 407              		.loc 1 55 5 view .LVU119
 408 005e FFF7FEFF 		bl	tos_cpu_cpsr_restore
 409              	.LVL37:
  56:..//kernel/core/tos_timer.c **** 
 410              		.loc 1 56 1 is_stmt 0 view .LVU120
 411 0062 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 412              	.LVL38:
 413              	.L29:
  40:..//kernel/core/tos_timer.c **** 
 414              		.loc 1 40 9 is_stmt 1 view .LVU121
  40:..//kernel/core/tos_timer.c **** 
 415              		.loc 1 40 39 is_stmt 0 view .LVU122
 416 0066 D8E90645 		ldrd	r4, [r8, #24]
  40:..//kernel/core/tos_timer.c **** 
 417              		.loc 1 40 34 view .LVU123
 418 006a 034B     		ldr	r3, .L30+4
 419 006c C3E90045 		strd	r4, [r3]
 420 0070 F5E7     		b	.L27
 421              	.L31:
 422 0072 00BF     		.align	2
 423              	.L30:
 424 0074 00000000 		.word	k_tick_count
 425 0078 00000000 		.word	k_timer_ctl
 426 007c 08000000 		.word	k_timer_ctl+8
 427              		.cfi_endproc
 428              	.LFE110:
 430              		.section	.text.tos_timer_create,"ax",%progbits
 431              		.align	1
 432              		.global	tos_timer_create
 433              		.syntax unified
 434              		.thumb
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 20


 435              		.thumb_func
 436              		.fpu softvfp
 438              	tos_timer_create:
 439              	.LVL39:
 440              	.LFB113:
 103:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
 441              		.loc 1 103 1 is_stmt 1 view -0
 442              		.cfi_startproc
 443              		@ args = 20, pretend = 0, frame = 0
 444              		@ frame_needed = 0, uses_anonymous_args = 0
 445              		@ link register save eliminated.
 103:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
 446              		.loc 1 103 1 is_stmt 0 view .LVU125
 447 0000 2DE97003 		push	{r4, r5, r6, r8, r9}
 448              	.LCFI5:
 449              		.cfi_def_cfa_offset 20
 450              		.cfi_offset 4, -20
 451              		.cfi_offset 5, -16
 452              		.cfi_offset 6, -12
 453              		.cfi_offset 8, -8
 454              		.cfi_offset 9, -4
 455 0004 DDE90545 		ldrd	r4, [sp, #20]
 456 0008 079E     		ldr	r6, [sp, #28]
 457 000a BDF82410 		ldrh	r1, [sp, #36]
 104:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(callback);
 458              		.loc 1 104 5 is_stmt 1 view .LVU126
 104:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(callback);
 459              		.loc 1 104 5 view .LVU127
 460 000e 0028     		cmp	r0, #0
 461 0010 40D0     		beq	.L36
 462 0012 9046     		mov	r8, r2
 463 0014 9946     		mov	r9, r3
 464 0016 0346     		mov	r3, r0
 105:..//kernel/core/tos_timer.c **** 
 465              		.loc 1 105 5 view .LVU128
 105:..//kernel/core/tos_timer.c **** 
 466              		.loc 1 105 5 view .LVU129
 467 0018 002E     		cmp	r6, #0
 468 001a 3ED0     		beq	.L37
 107:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INVALID_PERIOD;
 469              		.loc 1 107 5 view .LVU130
 107:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INVALID_PERIOD;
 470              		.loc 1 107 8 is_stmt 0 view .LVU131
 471 001c 0229     		cmp	r1, #2
 472 001e 2DD0     		beq	.L44
 473              	.LVL40:
 474              	.L34:
 111:..//kernel/core/tos_timer.c ****         // if you create a oneshot timer and delay 0 to trigger, why don't just call the timer_call
 475              		.loc 1 111 5 is_stmt 1 view .LVU132
 111:..//kernel/core/tos_timer.c ****         // if you create a oneshot timer and delay 0 to trigger, why don't just call the timer_call
 476              		.loc 1 111 8 is_stmt 0 view .LVU133
 477 0020 0129     		cmp	r1, #1
 478 0022 31D0     		beq	.L45
 479              	.L35:
 116:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INVALID_OPT;
 480              		.loc 1 116 5 is_stmt 1 view .LVU134
 116:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INVALID_OPT;
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 21


 481              		.loc 1 116 38 is_stmt 0 view .LVU135
 482 0024 4A1E     		subs	r2, r1, #1
 483 0026 92B2     		uxth	r2, r2
 116:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INVALID_OPT;
 484              		.loc 1 116 8 view .LVU136
 485 0028 012A     		cmp	r2, #1
 486 002a 39D8     		bhi	.L40
 120:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_DELAY_FOREVER;
 487              		.loc 1 120 5 is_stmt 1 view .LVU137
 120:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_DELAY_FOREVER;
 488              		.loc 1 120 8 is_stmt 0 view .LVU138
 489 002c B9F1FF3F 		cmp	r9, #-1
 490 0030 08BF     		it	eq
 491 0032 B8F1FF3F 		cmpeq	r8, #-1
 492 0036 36D0     		beq	.L41
 124:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_PERIOD_FOREVER;
 493              		.loc 1 124 5 is_stmt 1 view .LVU139
 124:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_PERIOD_FOREVER;
 494              		.loc 1 124 8 is_stmt 0 view .LVU140
 495 0038 B5F1FF3F 		cmp	r5, #-1
 496 003c 08BF     		it	eq
 497 003e B4F1FF3F 		cmpeq	r4, #-1
 498 0042 33D0     		beq	.L42
 128:..//kernel/core/tos_timer.c ****     tmr->delay          = delay;
 499              		.loc 1 128 5 is_stmt 1 view .LVU141
 128:..//kernel/core/tos_timer.c ****     tmr->delay          = delay;
 500              		.loc 1 128 25 is_stmt 0 view .LVU142
 501 0044 0122     		movs	r2, #1
 502 0046 83F83220 		strb	r2, [r3, #50]
 129:..//kernel/core/tos_timer.c ****     tmr->expires        = (k_tick_t)0u;
 503              		.loc 1 129 5 is_stmt 1 view .LVU143
 129:..//kernel/core/tos_timer.c ****     tmr->expires        = (k_tick_t)0u;
 504              		.loc 1 129 25 is_stmt 0 view .LVU144
 505 004a C3E90889 		strd	r8, [r3, #32]
 130:..//kernel/core/tos_timer.c ****     tmr->period         = period;
 506              		.loc 1 130 5 is_stmt 1 view .LVU145
 130:..//kernel/core/tos_timer.c ****     tmr->period         = period;
 507              		.loc 1 130 25 is_stmt 0 view .LVU146
 508 004e 4FF00008 		mov	r8, #0
 509 0052 4FF00009 		mov	r9, #0
 510 0056 C3E90689 		strd	r8, [r3, #24]
 131:..//kernel/core/tos_timer.c ****     tmr->opt            = opt;
 511              		.loc 1 131 5 is_stmt 1 view .LVU147
 131:..//kernel/core/tos_timer.c ****     tmr->opt            = opt;
 512              		.loc 1 131 25 is_stmt 0 view .LVU148
 513 005a C3E90A45 		strd	r4, [r3, #40]
 132:..//kernel/core/tos_timer.c ****     tmr->cb             = callback;
 514              		.loc 1 132 5 is_stmt 1 view .LVU149
 132:..//kernel/core/tos_timer.c ****     tmr->cb             = callback;
 515              		.loc 1 132 25 is_stmt 0 view .LVU150
 516 005e 1986     		strh	r1, [r3, #48]	@ movhi
 133:..//kernel/core/tos_timer.c ****     tmr->cb_arg         = cb_arg;
 517              		.loc 1 133 5 is_stmt 1 view .LVU151
 133:..//kernel/core/tos_timer.c ****     tmr->cb_arg         = cb_arg;
 518              		.loc 1 133 25 is_stmt 0 view .LVU152
 519 0060 5E60     		str	r6, [r3, #4]
 134:..//kernel/core/tos_timer.c ****     tos_list_init(&tmr->list);
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 22


 520              		.loc 1 134 5 is_stmt 1 view .LVU153
 134:..//kernel/core/tos_timer.c ****     tos_list_init(&tmr->list);
 521              		.loc 1 134 25 is_stmt 0 view .LVU154
 522 0062 089A     		ldr	r2, [sp, #32]
 523 0064 9A60     		str	r2, [r3, #8]
 135:..//kernel/core/tos_timer.c **** 
 524              		.loc 1 135 5 is_stmt 1 view .LVU155
 525 0066 03F10C02 		add	r2, r3, #12
 526              	.LVL41:
 527              	.LBB50:
 528              	.LBI50:
  99:..//kernel/core/include/tos_list.h **** {
 529              		.loc 3 99 32 view .LVU156
 530              	.LBB51:
 101:..//kernel/core/include/tos_list.h ****     list->prev = list;
 531              		.loc 3 101 5 view .LVU157
 101:..//kernel/core/include/tos_list.h ****     list->prev = list;
 532              		.loc 3 101 16 is_stmt 0 view .LVU158
 533 006a DA60     		str	r2, [r3, #12]
 102:..//kernel/core/include/tos_list.h **** }
 534              		.loc 3 102 5 is_stmt 1 view .LVU159
 102:..//kernel/core/include/tos_list.h **** }
 535              		.loc 3 102 16 is_stmt 0 view .LVU160
 536 006c 1A61     		str	r2, [r3, #16]
 537              	.LVL42:
 102:..//kernel/core/include/tos_list.h **** }
 538              		.loc 3 102 16 view .LVU161
 539              	.LBE51:
 540              	.LBE50:
 137:..//kernel/core/tos_timer.c **** 
 541              		.loc 1 137 5 is_stmt 1 view .LVU162
 542              	.LBB52:
 543              	.LBI52:
 185:..//kernel/core/include/tos_sys.h **** }
 186:..//kernel/core/include/tos_sys.h **** 
 187:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ void knl_object_init(knl_obj_t *knl_obj, knl_obj_type_t type)
 544              		.loc 2 187 32 view .LVU163
 545              	.LBB53:
 188:..//kernel/core/include/tos_sys.h **** {
 189:..//kernel/core/include/tos_sys.h ****     knl_obj->type = type;
 546              		.loc 2 189 5 view .LVU164
 547              		.loc 2 189 19 is_stmt 0 view .LVU165
 548 006e 4DF6D922 		movw	r2, #56025
 549 0072 5A80     		strh	r2, [r3, #2]	@ movhi
 550              	.LVL43:
 551              		.loc 2 189 19 view .LVU166
 552              	.LBE53:
 553              	.LBE52:
 139:..//kernel/core/tos_timer.c **** }
 554              		.loc 1 139 5 is_stmt 1 view .LVU167
 139:..//kernel/core/tos_timer.c **** }
 555              		.loc 1 139 12 is_stmt 0 view .LVU168
 556 0074 0020     		movs	r0, #0
 557              	.LVL44:
 558              	.L33:
 140:..//kernel/core/tos_timer.c **** 
 559              		.loc 1 140 1 view .LVU169
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 23


 560 0076 BDE87003 		pop	{r4, r5, r6, r8, r9}
 561              	.LCFI6:
 562              		.cfi_remember_state
 563              		.cfi_restore 9
 564              		.cfi_restore 8
 565              		.cfi_restore 6
 566              		.cfi_restore 5
 567              		.cfi_restore 4
 568              		.cfi_def_cfa_offset 0
 569              	.LVL45:
 140:..//kernel/core/tos_timer.c **** 
 570              		.loc 1 140 1 view .LVU170
 571 007a 7047     		bx	lr
 572              	.LVL46:
 573              	.L44:
 574              	.LCFI7:
 575              		.cfi_restore_state
 107:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INVALID_PERIOD;
 576              		.loc 1 107 39 discriminator 1 view .LVU171
 577 007c 54EA0502 		orrs	r2, r4, r5
 578              	.LVL47:
 107:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INVALID_PERIOD;
 579              		.loc 1 107 39 discriminator 1 view .LVU172
 580 0080 CED1     		bne	.L34
 108:..//kernel/core/tos_timer.c ****     }
 581              		.loc 1 108 16 view .LVU173
 582 0082 40F63800 		movw	r0, #2104
 583              	.LVL48:
 108:..//kernel/core/tos_timer.c ****     }
 584              		.loc 1 108 16 view .LVU174
 585 0086 F6E7     		b	.L33
 586              	.LVL49:
 587              	.L45:
 111:..//kernel/core/tos_timer.c ****         // if you create a oneshot timer and delay 0 to trigger, why don't just call the timer_call
 588              		.loc 1 111 38 discriminator 1 view .LVU175
 589 0088 58EA0902 		orrs	r2, r8, r9
 590 008c CAD1     		bne	.L35
 113:..//kernel/core/tos_timer.c ****     }
 591              		.loc 1 113 16 view .LVU176
 592 008e 40F63700 		movw	r0, #2103
 593              	.LVL50:
 113:..//kernel/core/tos_timer.c ****     }
 594              		.loc 1 113 16 view .LVU177
 595 0092 F0E7     		b	.L33
 596              	.LVL51:
 597              	.L36:
 104:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(callback);
 598              		.loc 1 104 5 view .LVU178
 599 0094 40F24C40 		movw	r0, #1100
 600              	.LVL52:
 104:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(callback);
 601              		.loc 1 104 5 view .LVU179
 602 0098 EDE7     		b	.L33
 603              	.LVL53:
 604              	.L37:
 105:..//kernel/core/tos_timer.c **** 
 605              		.loc 1 105 5 view .LVU180
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 24


 606 009a 40F24C40 		movw	r0, #1100
 607              	.LVL54:
 105:..//kernel/core/tos_timer.c **** 
 608              		.loc 1 105 5 view .LVU181
 609 009e EAE7     		b	.L33
 610              	.LVL55:
 611              	.L40:
 117:..//kernel/core/tos_timer.c ****     }
 612              		.loc 1 117 16 view .LVU182
 613 00a0 40F63A00 		movw	r0, #2106
 614              	.LVL56:
 117:..//kernel/core/tos_timer.c ****     }
 615              		.loc 1 117 16 view .LVU183
 616 00a4 E7E7     		b	.L33
 617              	.LVL57:
 618              	.L41:
 121:..//kernel/core/tos_timer.c ****     }
 619              		.loc 1 121 16 view .LVU184
 620 00a6 40F63500 		movw	r0, #2101
 621              	.LVL58:
 121:..//kernel/core/tos_timer.c ****     }
 622              		.loc 1 121 16 view .LVU185
 623 00aa E4E7     		b	.L33
 624              	.LVL59:
 625              	.L42:
 125:..//kernel/core/tos_timer.c ****     }
 626              		.loc 1 125 16 view .LVU186
 627 00ac 40F63600 		movw	r0, #2102
 628              	.LVL60:
 125:..//kernel/core/tos_timer.c ****     }
 629              		.loc 1 125 16 view .LVU187
 630 00b0 E1E7     		b	.L33
 631              		.cfi_endproc
 632              	.LFE113:
 634              		.section	.text.tos_timer_destroy,"ax",%progbits
 635              		.align	1
 636              		.global	tos_timer_destroy
 637              		.syntax unified
 638              		.thumb
 639              		.thumb_func
 640              		.fpu softvfp
 642              	tos_timer_destroy:
 643              	.LVL61:
 644              	.LFB114:
 143:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
 645              		.loc 1 143 1 is_stmt 1 view -0
 646              		.cfi_startproc
 647              		@ args = 0, pretend = 0, frame = 0
 648              		@ frame_needed = 0, uses_anonymous_args = 0
 144:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 649              		.loc 1 144 5 view .LVU189
 144:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 650              		.loc 1 144 5 view .LVU190
 651 0000 10B3     		cbz	r0, .L49
 143:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
 652              		.loc 1 143 1 is_stmt 0 view .LVU191
 653 0002 10B5     		push	{r4, lr}
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 25


 654              	.LCFI8:
 655              		.cfi_def_cfa_offset 8
 656              		.cfi_offset 4, -8
 657              		.cfi_offset 14, -4
 658 0004 0446     		mov	r4, r0
 145:..//kernel/core/tos_timer.c **** 
 659              		.loc 1 145 5 is_stmt 1 view .LVU192
 145:..//kernel/core/tos_timer.c **** 
 660              		.loc 1 145 5 view .LVU193
 661              	.LVL62:
 662              	.LBB54:
 663              	.LBI54:
 182:..//kernel/core/include/tos_sys.h **** {
 664              		.loc 2 182 31 view .LVU194
 665              	.LBB55:
 184:..//kernel/core/include/tos_sys.h **** }
 666              		.loc 2 184 5 view .LVU195
 184:..//kernel/core/include/tos_sys.h **** }
 667              		.loc 2 184 19 is_stmt 0 view .LVU196
 668 0006 4288     		ldrh	r2, [r0, #2]
 669              	.LVL63:
 184:..//kernel/core/include/tos_sys.h **** }
 670              		.loc 2 184 19 view .LVU197
 671              	.LBE55:
 672              	.LBE54:
 145:..//kernel/core/tos_timer.c **** 
 673              		.loc 1 145 5 view .LVU198
 674 0008 4DF6D923 		movw	r3, #56025
 675 000c 9A42     		cmp	r2, r3
 676 000e 1ED1     		bne	.L50
 147:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 677              		.loc 1 147 5 is_stmt 1 view .LVU199
 147:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 678              		.loc 1 147 12 is_stmt 0 view .LVU200
 679 0010 90F83230 		ldrb	r3, [r0, #50]	@ zero_extendqisi2
 147:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 680              		.loc 1 147 8 view .LVU201
 681 0014 F3B1     		cbz	r3, .L51
 151:..//kernel/core/tos_timer.c ****         timer_takeoff(tmr);
 682              		.loc 1 151 5 is_stmt 1 view .LVU202
 151:..//kernel/core/tos_timer.c ****         timer_takeoff(tmr);
 683              		.loc 1 151 8 is_stmt 0 view .LVU203
 684 0016 022B     		cmp	r3, #2
 685 0018 13D0     		beq	.L56
 686              	.LVL64:
 687              	.L48:
 155:..//kernel/core/tos_timer.c ****     return K_ERR_NONE;
 688              		.loc 1 155 5 is_stmt 1 view .LVU204
 689              	.LBB56:
 690              	.LBI56:
  83:..//kernel/core/tos_timer.c **** {
 691              		.loc 1 83 24 view .LVU205
 692              	.LBB57:
  85:..//kernel/core/tos_timer.c ****     tmr->delay          = (k_tick_t)0u;
 693              		.loc 1 85 5 view .LVU206
  85:..//kernel/core/tos_timer.c ****     tmr->delay          = (k_tick_t)0u;
 694              		.loc 1 85 25 is_stmt 0 view .LVU207
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 26


 695 001a 0020     		movs	r0, #0
 696 001c 84F83200 		strb	r0, [r4, #50]
  86:..//kernel/core/tos_timer.c ****     tmr->expires        = (k_tick_t)0u;
 697              		.loc 1 86 5 is_stmt 1 view .LVU208
  86:..//kernel/core/tos_timer.c ****     tmr->expires        = (k_tick_t)0u;
 698              		.loc 1 86 25 is_stmt 0 view .LVU209
 699 0020 0022     		movs	r2, #0
 700 0022 0023     		movs	r3, #0
 701 0024 C4E90823 		strd	r2, [r4, #32]
  87:..//kernel/core/tos_timer.c ****     tmr->period         = (k_tick_t)0u;
 702              		.loc 1 87 5 is_stmt 1 view .LVU210
  87:..//kernel/core/tos_timer.c ****     tmr->period         = (k_tick_t)0u;
 703              		.loc 1 87 25 is_stmt 0 view .LVU211
 704 0028 C4E90623 		strd	r2, [r4, #24]
  88:..//kernel/core/tos_timer.c ****     tmr->opt            = (k_opt_t)0u;
 705              		.loc 1 88 5 is_stmt 1 view .LVU212
  88:..//kernel/core/tos_timer.c ****     tmr->opt            = (k_opt_t)0u;
 706              		.loc 1 88 25 is_stmt 0 view .LVU213
 707 002c C4E90A23 		strd	r2, [r4, #40]
  89:..//kernel/core/tos_timer.c ****     tmr->cb             = K_NULL;
 708              		.loc 1 89 5 is_stmt 1 view .LVU214
  89:..//kernel/core/tos_timer.c ****     tmr->cb             = K_NULL;
 709              		.loc 1 89 25 is_stmt 0 view .LVU215
 710 0030 2086     		strh	r0, [r4, #48]	@ movhi
  90:..//kernel/core/tos_timer.c ****     tmr->cb_arg         = K_NULL;
 711              		.loc 1 90 5 is_stmt 1 view .LVU216
  90:..//kernel/core/tos_timer.c ****     tmr->cb_arg         = K_NULL;
 712              		.loc 1 90 25 is_stmt 0 view .LVU217
 713 0032 6060     		str	r0, [r4, #4]
  91:..//kernel/core/tos_timer.c ****     tos_list_init(&tmr->list);
 714              		.loc 1 91 5 is_stmt 1 view .LVU218
  91:..//kernel/core/tos_timer.c ****     tos_list_init(&tmr->list);
 715              		.loc 1 91 25 is_stmt 0 view .LVU219
 716 0034 A060     		str	r0, [r4, #8]
  92:..//kernel/core/tos_timer.c **** 
 717              		.loc 1 92 5 is_stmt 1 view .LVU220
 718 0036 04F10C03 		add	r3, r4, #12
 719              	.LVL65:
 720              	.LBB58:
 721              	.LBI58:
  99:..//kernel/core/include/tos_list.h **** {
 722              		.loc 3 99 32 view .LVU221
 723              	.LBB59:
 101:..//kernel/core/include/tos_list.h ****     list->prev = list;
 724              		.loc 3 101 5 view .LVU222
 101:..//kernel/core/include/tos_list.h ****     list->prev = list;
 725              		.loc 3 101 16 is_stmt 0 view .LVU223
 726 003a E360     		str	r3, [r4, #12]
 102:..//kernel/core/include/tos_list.h **** }
 727              		.loc 3 102 5 is_stmt 1 view .LVU224
 102:..//kernel/core/include/tos_list.h **** }
 728              		.loc 3 102 16 is_stmt 0 view .LVU225
 729 003c 2361     		str	r3, [r4, #16]
 730              	.LVL66:
 102:..//kernel/core/include/tos_list.h **** }
 731              		.loc 3 102 16 view .LVU226
 732              	.LBE59:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 27


 733              	.LBE58:
  94:..//kernel/core/tos_timer.c **** }
 734              		.loc 1 94 5 is_stmt 1 view .LVU227
 735              	.LBB60:
 736              	.LBI60:
 190:..//kernel/core/include/tos_sys.h **** }
 191:..//kernel/core/include/tos_sys.h **** 
 192:..//kernel/core/include/tos_sys.h **** __KNL__ __STATIC_INLINE__ void knl_object_deinit(knl_obj_t *knl_obj)
 737              		.loc 2 192 32 view .LVU228
 738              	.LBB61:
 193:..//kernel/core/include/tos_sys.h **** {
 194:..//kernel/core/include/tos_sys.h ****     knl_obj->type = KNL_OBJ_TYPE_NONE;
 739              		.loc 2 194 5 view .LVU229
 740              		.loc 2 194 19 is_stmt 0 view .LVU230
 741 003e 6080     		strh	r0, [r4, #2]	@ movhi
 742              	.LVL67:
 743              		.loc 2 194 19 view .LVU231
 744              	.LBE61:
 745              	.LBE60:
 746              	.LBE57:
 747              	.LBE56:
 156:..//kernel/core/tos_timer.c **** }
 748              		.loc 1 156 5 is_stmt 1 view .LVU232
 749              	.L47:
 157:..//kernel/core/tos_timer.c **** 
 750              		.loc 1 157 1 is_stmt 0 view .LVU233
 751 0040 10BD     		pop	{r4, pc}
 752              	.LVL68:
 753              	.L56:
 152:..//kernel/core/tos_timer.c ****     }
 754              		.loc 1 152 9 is_stmt 1 view .LVU234
 755 0042 FFF7FEFF 		bl	timer_takeoff
 756              	.LVL69:
 152:..//kernel/core/tos_timer.c ****     }
 757              		.loc 1 152 9 is_stmt 0 view .LVU235
 758 0046 E8E7     		b	.L48
 759              	.LVL70:
 760              	.L49:
 761              	.LCFI9:
 762              		.cfi_def_cfa_offset 0
 763              		.cfi_restore 4
 764              		.cfi_restore 14
 144:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 765              		.loc 1 144 5 view .LVU236
 766 0048 40F24C40 		movw	r0, #1100
 767              	.LVL71:
 157:..//kernel/core/tos_timer.c **** 
 768              		.loc 1 157 1 view .LVU237
 769 004c 7047     		bx	lr
 770              	.LVL72:
 771              	.L50:
 772              	.LCFI10:
 773              		.cfi_def_cfa_offset 8
 774              		.cfi_offset 4, -8
 775              		.cfi_offset 14, -4
 145:..//kernel/core/tos_timer.c **** 
 776              		.loc 1 145 5 view .LVU238
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 28


 777 004e 40F24D40 		movw	r0, #1101
 778              	.LVL73:
 145:..//kernel/core/tos_timer.c **** 
 779              		.loc 1 145 5 view .LVU239
 780 0052 F5E7     		b	.L47
 781              	.LVL74:
 782              	.L51:
 148:..//kernel/core/tos_timer.c ****     }
 783              		.loc 1 148 16 view .LVU240
 784 0054 40F63400 		movw	r0, #2100
 785              	.LVL75:
 148:..//kernel/core/tos_timer.c ****     }
 786              		.loc 1 148 16 view .LVU241
 787 0058 F2E7     		b	.L47
 788              		.cfi_endproc
 789              	.LFE114:
 791              		.section	.text.tos_timer_start,"ax",%progbits
 792              		.align	1
 793              		.global	tos_timer_start
 794              		.syntax unified
 795              		.thumb
 796              		.thumb_func
 797              		.fpu softvfp
 799              	tos_timer_start:
 800              	.LVL76:
 801              	.LFB115:
 160:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
 802              		.loc 1 160 1 is_stmt 1 view -0
 803              		.cfi_startproc
 804              		@ args = 0, pretend = 0, frame = 0
 805              		@ frame_needed = 0, uses_anonymous_args = 0
 161:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 806              		.loc 1 161 5 view .LVU243
 161:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 807              		.loc 1 161 5 view .LVU244
 808 0000 88B3     		cbz	r0, .L63
 160:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
 809              		.loc 1 160 1 is_stmt 0 view .LVU245
 810 0002 10B5     		push	{r4, lr}
 811              	.LCFI11:
 812              		.cfi_def_cfa_offset 8
 813              		.cfi_offset 4, -8
 814              		.cfi_offset 14, -4
 815 0004 0446     		mov	r4, r0
 162:..//kernel/core/tos_timer.c **** 
 816              		.loc 1 162 5 is_stmt 1 view .LVU246
 162:..//kernel/core/tos_timer.c **** 
 817              		.loc 1 162 5 view .LVU247
 818              	.LVL77:
 819              	.LBB62:
 820              	.LBI62:
 182:..//kernel/core/include/tos_sys.h **** {
 821              		.loc 2 182 31 view .LVU248
 822              	.LBB63:
 184:..//kernel/core/include/tos_sys.h **** }
 823              		.loc 2 184 5 view .LVU249
 184:..//kernel/core/include/tos_sys.h **** }
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 29


 824              		.loc 2 184 19 is_stmt 0 view .LVU250
 825 0006 4188     		ldrh	r1, [r0, #2]
 826              	.LVL78:
 184:..//kernel/core/include/tos_sys.h **** }
 827              		.loc 2 184 19 view .LVU251
 828              	.LBE63:
 829              	.LBE62:
 162:..//kernel/core/tos_timer.c **** 
 830              		.loc 1 162 5 view .LVU252
 831 0008 4DF6D922 		movw	r2, #56025
 832 000c 9142     		cmp	r1, r2
 833 000e 2DD1     		bne	.L64
 164:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 834              		.loc 1 164 5 is_stmt 1 view .LVU253
 164:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 835              		.loc 1 164 12 is_stmt 0 view .LVU254
 836 0010 90F83220 		ldrb	r2, [r0, #50]	@ zero_extendqisi2
 164:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 837              		.loc 1 164 8 view .LVU255
 838 0014 6AB3     		cbz	r2, .L65
 168:..//kernel/core/tos_timer.c ****         timer_takeoff(tmr);
 839              		.loc 1 168 5 is_stmt 1 view .LVU256
 168:..//kernel/core/tos_timer.c ****         timer_takeoff(tmr);
 840              		.loc 1 168 8 is_stmt 0 view .LVU257
 841 0016 022A     		cmp	r2, #2
 842 0018 06D0     		beq	.L71
 175:..//kernel/core/tos_timer.c ****         tmr->state == TIMER_STATE_COMPLETED) {
 843              		.loc 1 175 5 is_stmt 1 view .LVU258
 175:..//kernel/core/tos_timer.c ****         tmr->state == TIMER_STATE_COMPLETED) {
 844              		.loc 1 175 8 is_stmt 0 view .LVU259
 845 001a 012A     		cmp	r2, #1
 846 001c 0FD0     		beq	.L60
 175:..//kernel/core/tos_timer.c ****         tmr->state == TIMER_STATE_COMPLETED) {
 847              		.loc 1 175 43 discriminator 1 view .LVU260
 848 001e 032A     		cmp	r2, #3
 849 0020 0DD0     		beq	.L60
 187:..//kernel/core/tos_timer.c **** }
 850              		.loc 1 187 12 view .LVU261
 851 0022 40F63900 		movw	r0, #2105
 852              	.LVL79:
 187:..//kernel/core/tos_timer.c **** }
 853              		.loc 1 187 12 view .LVU262
 854 0026 23E0     		b	.L58
 855              	.LVL80:
 856              	.L71:
 169:..//kernel/core/tos_timer.c ****         tmr->expires = tmr->delay;
 857              		.loc 1 169 9 is_stmt 1 view .LVU263
 858 0028 FFF7FEFF 		bl	timer_takeoff
 859              	.LVL81:
 170:..//kernel/core/tos_timer.c ****         timer_place(tmr);
 860              		.loc 1 170 9 view .LVU264
 170:..//kernel/core/tos_timer.c ****         timer_place(tmr);
 861              		.loc 1 170 27 is_stmt 0 view .LVU265
 862 002c D4E90823 		ldrd	r2, [r4, #32]
 170:..//kernel/core/tos_timer.c ****         timer_place(tmr);
 863              		.loc 1 170 22 view .LVU266
 864 0030 C4E90623 		strd	r2, [r4, #24]
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 30


 171:..//kernel/core/tos_timer.c ****         return K_ERR_NONE;
 865              		.loc 1 171 9 is_stmt 1 view .LVU267
 866 0034 2046     		mov	r0, r4
 867 0036 FFF7FEFF 		bl	timer_place
 868              	.LVL82:
 172:..//kernel/core/tos_timer.c ****     }
 869              		.loc 1 172 9 view .LVU268
 172:..//kernel/core/tos_timer.c ****     }
 870              		.loc 1 172 16 is_stmt 0 view .LVU269
 871 003a 0020     		movs	r0, #0
 872 003c 18E0     		b	.L58
 873              	.LVL83:
 874              	.L60:
 177:..//kernel/core/tos_timer.c ****         if (tmr->delay == (k_tick_t)0u) {
 875              		.loc 1 177 9 is_stmt 1 view .LVU270
 177:..//kernel/core/tos_timer.c ****         if (tmr->delay == (k_tick_t)0u) {
 876              		.loc 1 177 20 is_stmt 0 view .LVU271
 877 003e 0223     		movs	r3, #2
 878 0040 84F83230 		strb	r3, [r4, #50]
 178:..//kernel/core/tos_timer.c ****             tmr->expires = tmr->period;
 879              		.loc 1 178 9 is_stmt 1 view .LVU272
 178:..//kernel/core/tos_timer.c ****             tmr->expires = tmr->period;
 880              		.loc 1 178 16 is_stmt 0 view .LVU273
 881 0044 D4E90823 		ldrd	r2, [r4, #32]
 178:..//kernel/core/tos_timer.c ****             tmr->expires = tmr->period;
 882              		.loc 1 178 12 view .LVU274
 883 0048 52EA0301 		orrs	r1, r2, r3
 884 004c 08D1     		bne	.L61
 179:..//kernel/core/tos_timer.c ****         } else {
 885              		.loc 1 179 13 is_stmt 1 view .LVU275
 179:..//kernel/core/tos_timer.c ****         } else {
 886              		.loc 1 179 31 is_stmt 0 view .LVU276
 887 004e D4E90A23 		ldrd	r2, [r4, #40]
 179:..//kernel/core/tos_timer.c ****         } else {
 888              		.loc 1 179 26 view .LVU277
 889 0052 C4E90623 		strd	r2, [r4, #24]
 890              	.L62:
 183:..//kernel/core/tos_timer.c ****         return K_ERR_NONE;
 891              		.loc 1 183 9 is_stmt 1 view .LVU278
 892 0056 2046     		mov	r0, r4
 893              	.LVL84:
 183:..//kernel/core/tos_timer.c ****         return K_ERR_NONE;
 894              		.loc 1 183 9 is_stmt 0 view .LVU279
 895 0058 FFF7FEFF 		bl	timer_place
 896              	.LVL85:
 184:..//kernel/core/tos_timer.c ****     }
 897              		.loc 1 184 9 is_stmt 1 view .LVU280
 184:..//kernel/core/tos_timer.c ****     }
 898              		.loc 1 184 16 is_stmt 0 view .LVU281
 899 005c 0020     		movs	r0, #0
 900 005e 07E0     		b	.L58
 901              	.LVL86:
 902              	.L61:
 181:..//kernel/core/tos_timer.c ****         }
 903              		.loc 1 181 13 is_stmt 1 view .LVU282
 181:..//kernel/core/tos_timer.c ****         }
 904              		.loc 1 181 26 is_stmt 0 view .LVU283
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 31


 905 0060 C4E90623 		strd	r2, [r4, #24]
 906 0064 F7E7     		b	.L62
 907              	.L63:
 908              	.LCFI12:
 909              		.cfi_def_cfa_offset 0
 910              		.cfi_restore 4
 911              		.cfi_restore 14
 161:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 912              		.loc 1 161 5 view .LVU284
 913 0066 40F24C40 		movw	r0, #1100
 914              	.LVL87:
 188:..//kernel/core/tos_timer.c **** 
 915              		.loc 1 188 1 view .LVU285
 916 006a 7047     		bx	lr
 917              	.LVL88:
 918              	.L64:
 919              	.LCFI13:
 920              		.cfi_def_cfa_offset 8
 921              		.cfi_offset 4, -8
 922              		.cfi_offset 14, -4
 162:..//kernel/core/tos_timer.c **** 
 923              		.loc 1 162 5 view .LVU286
 924 006c 40F24D40 		movw	r0, #1101
 925              	.LVL89:
 926              	.L58:
 188:..//kernel/core/tos_timer.c **** 
 927              		.loc 1 188 1 view .LVU287
 928 0070 10BD     		pop	{r4, pc}
 929              	.LVL90:
 930              	.L65:
 165:..//kernel/core/tos_timer.c ****     }
 931              		.loc 1 165 16 view .LVU288
 932 0072 40F63400 		movw	r0, #2100
 933              	.LVL91:
 165:..//kernel/core/tos_timer.c ****     }
 934              		.loc 1 165 16 view .LVU289
 935 0076 FBE7     		b	.L58
 936              		.cfi_endproc
 937              	.LFE115:
 939              		.section	.text.tos_timer_stop,"ax",%progbits
 940              		.align	1
 941              		.global	tos_timer_stop
 942              		.syntax unified
 943              		.thumb
 944              		.thumb_func
 945              		.fpu softvfp
 947              	tos_timer_stop:
 948              	.LVL92:
 949              	.LFB116:
 191:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
 950              		.loc 1 191 1 is_stmt 1 view -0
 951              		.cfi_startproc
 952              		@ args = 0, pretend = 0, frame = 0
 953              		@ frame_needed = 0, uses_anonymous_args = 0
 192:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 954              		.loc 1 192 5 view .LVU291
 192:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 32


 955              		.loc 1 192 5 view .LVU292
 956 0000 B8B1     		cbz	r0, .L74
 191:..//kernel/core/tos_timer.c ****     TOS_PTR_SANITY_CHECK(tmr);
 957              		.loc 1 191 1 is_stmt 0 view .LVU293
 958 0002 08B5     		push	{r3, lr}
 959              	.LCFI14:
 960              		.cfi_def_cfa_offset 8
 961              		.cfi_offset 3, -8
 962              		.cfi_offset 14, -4
 193:..//kernel/core/tos_timer.c **** 
 963              		.loc 1 193 5 is_stmt 1 view .LVU294
 193:..//kernel/core/tos_timer.c **** 
 964              		.loc 1 193 5 view .LVU295
 965              	.LVL93:
 966              	.LBB64:
 967              	.LBI64:
 182:..//kernel/core/include/tos_sys.h **** {
 968              		.loc 2 182 31 view .LVU296
 969              	.LBB65:
 184:..//kernel/core/include/tos_sys.h **** }
 970              		.loc 2 184 5 view .LVU297
 184:..//kernel/core/include/tos_sys.h **** }
 971              		.loc 2 184 19 is_stmt 0 view .LVU298
 972 0004 4188     		ldrh	r1, [r0, #2]
 973              	.LVL94:
 184:..//kernel/core/include/tos_sys.h **** }
 974              		.loc 2 184 19 view .LVU299
 975              	.LBE65:
 976              	.LBE64:
 193:..//kernel/core/tos_timer.c **** 
 977              		.loc 1 193 5 view .LVU300
 978 0006 4DF6D922 		movw	r2, #56025
 979 000a 9142     		cmp	r1, r2
 980 000c 14D1     		bne	.L75
 195:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 981              		.loc 1 195 5 is_stmt 1 view .LVU301
 195:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 982              		.loc 1 195 12 is_stmt 0 view .LVU302
 983 000e 90F83220 		ldrb	r2, [r0, #50]	@ zero_extendqisi2
 195:..//kernel/core/tos_timer.c ****         return K_ERR_TIMER_INACTIVE;
 984              		.loc 1 195 8 view .LVU303
 985 0012 A2B1     		cbz	r2, .L76
 199:..//kernel/core/tos_timer.c ****         tmr->state == TIMER_STATE_STOPPED) {
 986              		.loc 1 199 5 is_stmt 1 view .LVU304
 199:..//kernel/core/tos_timer.c ****         tmr->state == TIMER_STATE_STOPPED) {
 987              		.loc 1 199 8 is_stmt 0 view .LVU305
 988 0014 032A     		cmp	r2, #3
 989 0016 15D0     		beq	.L77
 199:..//kernel/core/tos_timer.c ****         tmr->state == TIMER_STATE_STOPPED) {
 990              		.loc 1 199 45 discriminator 1 view .LVU306
 991 0018 012A     		cmp	r2, #1
 992 001a 16D0     		beq	.L78
 204:..//kernel/core/tos_timer.c ****         tmr->state = TIMER_STATE_STOPPED;
 993              		.loc 1 204 5 is_stmt 1 view .LVU307
 204:..//kernel/core/tos_timer.c ****         tmr->state = TIMER_STATE_STOPPED;
 994              		.loc 1 204 8 is_stmt 0 view .LVU308
 995 001c 022A     		cmp	r2, #2
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 33


 996 001e 01D0     		beq	.L84
 209:..//kernel/core/tos_timer.c **** }
 997              		.loc 1 209 12 view .LVU309
 998 0020 0020     		movs	r0, #0
 999              	.LVL95:
 209:..//kernel/core/tos_timer.c **** }
 1000              		.loc 1 209 12 view .LVU310
 1001 0022 0BE0     		b	.L73
 1002              	.LVL96:
 1003              	.L84:
 205:..//kernel/core/tos_timer.c ****         timer_takeoff(tmr);
 1004              		.loc 1 205 9 is_stmt 1 view .LVU311
 205:..//kernel/core/tos_timer.c ****         timer_takeoff(tmr);
 1005              		.loc 1 205 20 is_stmt 0 view .LVU312
 1006 0024 0123     		movs	r3, #1
 1007 0026 80F83230 		strb	r3, [r0, #50]
 206:..//kernel/core/tos_timer.c ****     }
 1008              		.loc 1 206 9 is_stmt 1 view .LVU313
 1009 002a FFF7FEFF 		bl	timer_takeoff
 1010              	.LVL97:
 209:..//kernel/core/tos_timer.c **** }
 1011              		.loc 1 209 12 is_stmt 0 view .LVU314
 1012 002e 0020     		movs	r0, #0
 1013 0030 04E0     		b	.L73
 1014              	.LVL98:
 1015              	.L74:
 1016              	.LCFI15:
 1017              		.cfi_def_cfa_offset 0
 1018              		.cfi_restore 3
 1019              		.cfi_restore 14
 192:..//kernel/core/tos_timer.c ****     TOS_OBJ_VERIFY(tmr, KNL_OBJ_TYPE_TIMER);
 1020              		.loc 1 192 5 view .LVU315
 1021 0032 40F24C40 		movw	r0, #1100
 1022              	.LVL99:
 210:..//kernel/core/tos_timer.c **** 
 1023              		.loc 1 210 1 view .LVU316
 1024 0036 7047     		bx	lr
 1025              	.LVL100:
 1026              	.L75:
 1027              	.LCFI16:
 1028              		.cfi_def_cfa_offset 8
 1029              		.cfi_offset 3, -8
 1030              		.cfi_offset 14, -4
 193:..//kernel/core/tos_timer.c **** 
 1031              		.loc 1 193 5 view .LVU317
 1032 0038 40F24D40 		movw	r0, #1101
 1033              	.LVL101:
 1034              	.L73:
 210:..//kernel/core/tos_timer.c **** 
 1035              		.loc 1 210 1 view .LVU318
 1036 003c 08BD     		pop	{r3, pc}
 1037              	.LVL102:
 1038              	.L76:
 196:..//kernel/core/tos_timer.c ****     }
 1039              		.loc 1 196 16 view .LVU319
 1040 003e 40F63400 		movw	r0, #2100
 1041              	.LVL103:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 34


 196:..//kernel/core/tos_timer.c ****     }
 1042              		.loc 1 196 16 view .LVU320
 1043 0042 FBE7     		b	.L73
 1044              	.LVL104:
 1045              	.L77:
 201:..//kernel/core/tos_timer.c ****     }
 1046              		.loc 1 201 16 view .LVU321
 1047 0044 40F63B00 		movw	r0, #2107
 1048              	.LVL105:
 201:..//kernel/core/tos_timer.c ****     }
 1049              		.loc 1 201 16 view .LVU322
 1050 0048 F8E7     		b	.L73
 1051              	.LVL106:
 1052              	.L78:
 201:..//kernel/core/tos_timer.c ****     }
 1053              		.loc 1 201 16 view .LVU323
 1054 004a 40F63B00 		movw	r0, #2107
 1055              	.LVL107:
 201:..//kernel/core/tos_timer.c ****     }
 1056              		.loc 1 201 16 view .LVU324
 1057 004e F5E7     		b	.L73
 1058              		.cfi_endproc
 1059              	.LFE116:
 1061              		.section	.text.tos_timer_delay_change,"ax",%progbits
 1062              		.align	1
 1063              		.global	tos_timer_delay_change
 1064              		.syntax unified
 1065              		.thumb
 1066              		.thumb_func
 1067              		.fpu softvfp
 1069              	tos_timer_delay_change:
 1070              	.LVL108:
 1071              	.LFB118:
 245:..//kernel/core/tos_timer.c **** 
 246:..//kernel/core/tos_timer.c **** __API__ k_err_t tos_timer_delay_change(k_timer_t *tmr, k_tick_t delay)
 247:..//kernel/core/tos_timer.c **** {
 1072              		.loc 1 247 1 is_stmt 1 view -0
 1073              		.cfi_startproc
 1074              		@ args = 0, pretend = 0, frame = 0
 1075              		@ frame_needed = 0, uses_anonymous_args = 0
 1076              		.loc 1 247 1 is_stmt 0 view .LVU326
 1077 0000 00B5     		push	{lr}
 1078              	.LCFI17:
 1079              		.cfi_def_cfa_offset 4
 1080              		.cfi_offset 14, -4
 1081 0002 83B0     		sub	sp, sp, #12
 1082              	.LCFI18:
 1083              		.cfi_def_cfa_offset 16
 248:..//kernel/core/tos_timer.c ****     return timer_change(tmr, delay, TIMER_CHANGE_TYPE_DELAY);
 1084              		.loc 1 248 5 is_stmt 1 view .LVU327
 1085              		.loc 1 248 12 is_stmt 0 view .LVU328
 1086 0004 0021     		movs	r1, #0
 1087 0006 0091     		str	r1, [sp]
 1088 0008 FFF7FEFF 		bl	timer_change
 1089              	.LVL109:
 249:..//kernel/core/tos_timer.c **** }
 1090              		.loc 1 249 1 view .LVU329
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 35


 1091 000c 03B0     		add	sp, sp, #12
 1092              	.LCFI19:
 1093              		.cfi_def_cfa_offset 4
 1094              		@ sp needed
 1095 000e 5DF804FB 		ldr	pc, [sp], #4
 1096              		.cfi_endproc
 1097              	.LFE118:
 1099              		.section	.text.tos_timer_period_change,"ax",%progbits
 1100              		.align	1
 1101              		.global	tos_timer_period_change
 1102              		.syntax unified
 1103              		.thumb
 1104              		.thumb_func
 1105              		.fpu softvfp
 1107              	tos_timer_period_change:
 1108              	.LVL110:
 1109              	.LFB119:
 250:..//kernel/core/tos_timer.c **** 
 251:..//kernel/core/tos_timer.c **** __API__ k_err_t tos_timer_period_change(k_timer_t *tmr, k_tick_t period)
 252:..//kernel/core/tos_timer.c **** {
 1110              		.loc 1 252 1 is_stmt 1 view -0
 1111              		.cfi_startproc
 1112              		@ args = 0, pretend = 0, frame = 0
 1113              		@ frame_needed = 0, uses_anonymous_args = 0
 1114              		.loc 1 252 1 is_stmt 0 view .LVU331
 1115 0000 00B5     		push	{lr}
 1116              	.LCFI20:
 1117              		.cfi_def_cfa_offset 4
 1118              		.cfi_offset 14, -4
 1119 0002 83B0     		sub	sp, sp, #12
 1120              	.LCFI21:
 1121              		.cfi_def_cfa_offset 16
 253:..//kernel/core/tos_timer.c ****     return timer_change(tmr, period, TIMER_CHANGE_TYPE_PERIOD);
 1122              		.loc 1 253 5 is_stmt 1 view .LVU332
 1123              		.loc 1 253 12 is_stmt 0 view .LVU333
 1124 0004 0121     		movs	r1, #1
 1125 0006 0091     		str	r1, [sp]
 1126 0008 FFF7FEFF 		bl	timer_change
 1127              	.LVL111:
 254:..//kernel/core/tos_timer.c **** }
 1128              		.loc 1 254 1 view .LVU334
 1129 000c 03B0     		add	sp, sp, #12
 1130              	.LCFI22:
 1131              		.cfi_def_cfa_offset 4
 1132              		@ sp needed
 1133 000e 5DF804FB 		ldr	pc, [sp], #4
 1134              		.cfi_endproc
 1135              	.LFE119:
 1137              		.section	.text.timer_next_expires_get,"ax",%progbits
 1138              		.align	1
 1139              		.global	timer_next_expires_get
 1140              		.syntax unified
 1141              		.thumb
 1142              		.thumb_func
 1143              		.fpu softvfp
 1145              	timer_next_expires_get:
 1146              	.LFB120:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 36


 255:..//kernel/core/tos_timer.c **** 
 256:..//kernel/core/tos_timer.c **** __KNL__ k_tick_t timer_next_expires_get(void)
 257:..//kernel/core/tos_timer.c **** {
 1147              		.loc 1 257 1 is_stmt 1 view -0
 1148              		.cfi_startproc
 1149              		@ args = 0, pretend = 0, frame = 0
 1150              		@ frame_needed = 0, uses_anonymous_args = 0
 1151 0000 38B5     		push	{r3, r4, r5, lr}
 1152              	.LCFI23:
 1153              		.cfi_def_cfa_offset 16
 1154              		.cfi_offset 3, -16
 1155              		.cfi_offset 4, -12
 1156              		.cfi_offset 5, -8
 1157              		.cfi_offset 14, -4
 258:..//kernel/core/tos_timer.c ****     TOS_CPU_CPSR_ALLOC();
 1158              		.loc 1 258 5 view .LVU336
 1159              	.LVL112:
 259:..//kernel/core/tos_timer.c ****     k_tick_t next_expires;
 1160              		.loc 1 259 5 view .LVU337
 260:..//kernel/core/tos_timer.c **** 
 261:..//kernel/core/tos_timer.c ****     TOS_CPU_INT_DISABLE();
 1161              		.loc 1 261 5 view .LVU338
 1162              		.loc 1 261 5 view .LVU339
 1163 0002 FFF7FEFF 		bl	tos_cpu_cpsr_save
 1164              	.LVL113:
 262:..//kernel/core/tos_timer.c **** 
 263:..//kernel/core/tos_timer.c ****     if (k_timer_ctl.next_expires == TOS_TIME_FOREVER) {
 1165              		.loc 1 263 5 view .LVU340
 1166              		.loc 1 263 20 is_stmt 0 view .LVU341
 1167 0006 0D4B     		ldr	r3, .L93
 1168 0008 D3E90045 		ldrd	r4, [r3]
 1169              		.loc 1 263 8 view .LVU342
 1170 000c B5F1FF3F 		cmp	r5, #-1
 1171 0010 08BF     		it	eq
 1172 0012 B4F1FF3F 		cmpeq	r4, #-1
 1173 0016 09D0     		beq	.L90
 264:..//kernel/core/tos_timer.c ****         next_expires = TOS_TIME_FOREVER;
 265:..//kernel/core/tos_timer.c ****     } else if (k_timer_ctl.next_expires <= k_tick_count) {
 1174              		.loc 1 265 12 is_stmt 1 view .LVU343
 1175              		.loc 1 265 41 is_stmt 0 view .LVU344
 1176 0018 094B     		ldr	r3, .L93+4
 1177 001a D3E90023 		ldrd	r2, [r3]
 1178              		.loc 1 265 15 view .LVU345
 1179 001e AB42     		cmp	r3, r5
 1180 0020 08BF     		it	eq
 1181 0022 A242     		cmpeq	r2, r4
 1182 0024 07D2     		bcs	.L91
 266:..//kernel/core/tos_timer.c ****         next_expires = (k_tick_t)0u;
 267:..//kernel/core/tos_timer.c ****     } else {
 268:..//kernel/core/tos_timer.c ****         next_expires = k_timer_ctl.next_expires - k_tick_count;
 1183              		.loc 1 268 9 is_stmt 1 view .LVU346
 1184              		.loc 1 268 22 is_stmt 0 view .LVU347
 1185 0026 A41A     		subs	r4, r4, r2
 1186 0028 65EB0305 		sbc	r5, r5, r3
 1187              	.LVL114:
 1188              	.L90:
 269:..//kernel/core/tos_timer.c ****     }
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 37


 270:..//kernel/core/tos_timer.c **** 
 271:..//kernel/core/tos_timer.c ****     TOS_CPU_INT_ENABLE();
 1189              		.loc 1 271 5 is_stmt 1 view .LVU348
 1190              		.loc 1 271 5 view .LVU349
 1191 002c FFF7FEFF 		bl	tos_cpu_cpsr_restore
 1192              	.LVL115:
 272:..//kernel/core/tos_timer.c ****     return next_expires;
 1193              		.loc 1 272 5 view .LVU350
 273:..//kernel/core/tos_timer.c **** }
 1194              		.loc 1 273 1 is_stmt 0 view .LVU351
 1195 0030 2046     		mov	r0, r4
 1196 0032 2946     		mov	r1, r5
 1197 0034 38BD     		pop	{r3, r4, r5, pc}
 1198              	.LVL116:
 1199              	.L91:
 266:..//kernel/core/tos_timer.c ****     } else {
 1200              		.loc 1 266 22 view .LVU352
 1201 0036 0024     		movs	r4, #0
 1202 0038 0025     		movs	r5, #0
 1203 003a F7E7     		b	.L90
 1204              	.L94:
 1205              		.align	2
 1206              	.L93:
 1207 003c 00000000 		.word	k_timer_ctl
 1208 0040 00000000 		.word	k_tick_count
 1209              		.cfi_endproc
 1210              	.LFE120:
 1212              		.section	.text.timer_update,"ax",%progbits
 1213              		.align	1
 1214              		.global	timer_update
 1215              		.syntax unified
 1216              		.thumb
 1217              		.thumb_func
 1218              		.fpu softvfp
 1220              	timer_update:
 1221              	.LFB121:
 274:..//kernel/core/tos_timer.c **** 
 275:..//kernel/core/tos_timer.c **** #if TOS_CFG_TIMER_AS_PROC > 0u
 276:..//kernel/core/tos_timer.c **** 
 277:..//kernel/core/tos_timer.c **** __KNL__ void timer_update(void)
 278:..//kernel/core/tos_timer.c **** {
 1222              		.loc 1 278 1 is_stmt 1 view -0
 1223              		.cfi_startproc
 1224              		@ args = 0, pretend = 0, frame = 0
 1225              		@ frame_needed = 0, uses_anonymous_args = 0
 1226 0000 38B5     		push	{r3, r4, r5, lr}
 1227              	.LCFI24:
 1228              		.cfi_def_cfa_offset 16
 1229              		.cfi_offset 3, -16
 1230              		.cfi_offset 4, -12
 1231              		.cfi_offset 5, -8
 1232              		.cfi_offset 14, -4
 279:..//kernel/core/tos_timer.c ****     k_timer_t *tmr, *tmp;
 1233              		.loc 1 279 5 view .LVU354
 280:..//kernel/core/tos_timer.c **** 
 281:..//kernel/core/tos_timer.c ****     if (k_timer_ctl.next_expires > k_tick_count) { // not yet
 1234              		.loc 1 281 5 view .LVU355
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 38


 1235              		.loc 1 281 20 is_stmt 0 view .LVU356
 1236 0002 1E4B     		ldr	r3, .L105
 1237 0004 D3E90023 		ldrd	r2, [r3]
 1238              		.loc 1 281 34 view .LVU357
 1239 0008 1D49     		ldr	r1, .L105+4
 1240 000a D1E90001 		ldrd	r0, [r1]
 1241              		.loc 1 281 8 view .LVU358
 1242 000e 9942     		cmp	r1, r3
 1243 0010 08BF     		it	eq
 1244 0012 9042     		cmpeq	r0, r2
 1245 0014 00D2     		bcs	.L103
 1246              	.L95:
 282:..//kernel/core/tos_timer.c ****         return;
 283:..//kernel/core/tos_timer.c ****     }
 284:..//kernel/core/tos_timer.c **** 
 285:..//kernel/core/tos_timer.c ****     tos_knl_sched_lock();
 286:..//kernel/core/tos_timer.c **** 
 287:..//kernel/core/tos_timer.c ****     TOS_LIST_FOR_EACH_ENTRY_SAFE(tmr, tmp, k_timer_t, list, &k_timer_ctl.list) {
 288:..//kernel/core/tos_timer.c ****         if (tmr->expires > k_tick_count) {
 289:..//kernel/core/tos_timer.c ****             break;
 290:..//kernel/core/tos_timer.c ****         }
 291:..//kernel/core/tos_timer.c **** 
 292:..//kernel/core/tos_timer.c ****         // time's up
 293:..//kernel/core/tos_timer.c ****         timer_takeoff(tmr);
 294:..//kernel/core/tos_timer.c **** 
 295:..//kernel/core/tos_timer.c ****         if (tmr->opt == TOS_OPT_TIMER_PERIODIC) {
 296:..//kernel/core/tos_timer.c ****             tmr->expires = tmr->period;
 297:..//kernel/core/tos_timer.c ****             timer_place(tmr);
 298:..//kernel/core/tos_timer.c ****         } else {
 299:..//kernel/core/tos_timer.c ****             tmr->state = TIMER_STATE_COMPLETED;
 300:..//kernel/core/tos_timer.c ****         }
 301:..//kernel/core/tos_timer.c **** 
 302:..//kernel/core/tos_timer.c ****         (*tmr->cb)(tmr->cb_arg);
 303:..//kernel/core/tos_timer.c ****     }
 304:..//kernel/core/tos_timer.c **** 
 305:..//kernel/core/tos_timer.c ****     tos_knl_sched_unlock();
 306:..//kernel/core/tos_timer.c **** }
 1247              		.loc 1 306 1 view .LVU359
 1248 0016 38BD     		pop	{r3, r4, r5, pc}
 1249              	.L103:
 285:..//kernel/core/tos_timer.c **** 
 1250              		.loc 1 285 5 is_stmt 1 view .LVU360
 1251 0018 FFF7FEFF 		bl	tos_knl_sched_lock
 1252              	.LVL117:
 287:..//kernel/core/tos_timer.c ****         if (tmr->expires > k_tick_count) {
 1253              		.loc 1 287 5 view .LVU361
 1254 001c 174B     		ldr	r3, .L105
 1255 001e 9C68     		ldr	r4, [r3, #8]
 1256              	.LVL118:
 287:..//kernel/core/tos_timer.c ****         if (tmr->expires > k_tick_count) {
 1257              		.loc 1 287 5 is_stmt 0 view .LVU362
 1258 0020 54F80C59 		ldr	r5, [r4], #-12
 1259              	.LVL119:
 287:..//kernel/core/tos_timer.c ****         if (tmr->expires > k_tick_count) {
 1260              		.loc 1 287 5 view .LVU363
 1261 0024 0C3D     		subs	r5, r5, #12
 1262              	.LVL120:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 39


 287:..//kernel/core/tos_timer.c ****         if (tmr->expires > k_tick_count) {
 1263              		.loc 1 287 5 view .LVU364
 1264 0026 0DE0     		b	.L97
 1265              	.LVL121:
 1266              	.L104:
 296:..//kernel/core/tos_timer.c ****             timer_place(tmr);
 1267              		.loc 1 296 13 is_stmt 1 view .LVU365
 296:..//kernel/core/tos_timer.c ****             timer_place(tmr);
 1268              		.loc 1 296 31 is_stmt 0 view .LVU366
 1269 0028 D4E90A23 		ldrd	r2, [r4, #40]
 296:..//kernel/core/tos_timer.c ****             timer_place(tmr);
 1270              		.loc 1 296 26 view .LVU367
 1271 002c C4E90623 		strd	r2, [r4, #24]
 297:..//kernel/core/tos_timer.c ****         } else {
 1272              		.loc 1 297 13 is_stmt 1 view .LVU368
 1273 0030 2046     		mov	r0, r4
 1274 0032 FFF7FEFF 		bl	timer_place
 1275              	.LVL122:
 1276              	.L100:
 302:..//kernel/core/tos_timer.c ****     }
 1277              		.loc 1 302 9 discriminator 2 view .LVU369
 302:..//kernel/core/tos_timer.c ****     }
 1278              		.loc 1 302 10 is_stmt 0 discriminator 2 view .LVU370
 1279 0036 6368     		ldr	r3, [r4, #4]
 1280 0038 A068     		ldr	r0, [r4, #8]
 1281 003a 9847     		blx	r3
 1282              	.LVL123:
 287:..//kernel/core/tos_timer.c ****         if (tmr->expires > k_tick_count) {
 1283              		.loc 1 287 5 discriminator 2 view .LVU371
 1284 003c EB68     		ldr	r3, [r5, #12]
 1285              	.LVL124:
 287:..//kernel/core/tos_timer.c ****         if (tmr->expires > k_tick_count) {
 1286              		.loc 1 287 5 discriminator 2 view .LVU372
 1287 003e 2C46     		mov	r4, r5
 1288 0040 A3F10C05 		sub	r5, r3, #12
 1289              	.LVL125:
 1290              	.L97:
 287:..//kernel/core/tos_timer.c ****         if (tmr->expires > k_tick_count) {
 1291              		.loc 1 287 5 discriminator 1 view .LVU373
 1292 0044 04F10C02 		add	r2, r4, #12
 1293 0048 0E4B     		ldr	r3, .L105+8
 1294 004a 9A42     		cmp	r2, r3
 1295 004c 12D0     		beq	.L98
 288:..//kernel/core/tos_timer.c ****             break;
 1296              		.loc 1 288 9 is_stmt 1 view .LVU374
 288:..//kernel/core/tos_timer.c ****             break;
 1297              		.loc 1 288 16 is_stmt 0 view .LVU375
 1298 004e D4E90623 		ldrd	r2, [r4, #24]
 288:..//kernel/core/tos_timer.c ****             break;
 1299              		.loc 1 288 26 view .LVU376
 1300 0052 0B49     		ldr	r1, .L105+4
 1301 0054 D1E90001 		ldrd	r0, [r1]
 288:..//kernel/core/tos_timer.c ****             break;
 1302              		.loc 1 288 12 view .LVU377
 1303 0058 9942     		cmp	r1, r3
 1304 005a 08BF     		it	eq
 1305 005c 9042     		cmpeq	r0, r2
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 40


 1306 005e 09D3     		bcc	.L98
 293:..//kernel/core/tos_timer.c **** 
 1307              		.loc 1 293 9 is_stmt 1 view .LVU378
 1308 0060 2046     		mov	r0, r4
 1309 0062 FFF7FEFF 		bl	timer_takeoff
 1310              	.LVL126:
 295:..//kernel/core/tos_timer.c ****             tmr->expires = tmr->period;
 1311              		.loc 1 295 9 view .LVU379
 295:..//kernel/core/tos_timer.c ****             tmr->expires = tmr->period;
 1312              		.loc 1 295 16 is_stmt 0 view .LVU380
 1313 0066 238E     		ldrh	r3, [r4, #48]
 295:..//kernel/core/tos_timer.c ****             tmr->expires = tmr->period;
 1314              		.loc 1 295 12 view .LVU381
 1315 0068 022B     		cmp	r3, #2
 1316 006a DDD0     		beq	.L104
 299:..//kernel/core/tos_timer.c ****         }
 1317              		.loc 1 299 13 is_stmt 1 view .LVU382
 299:..//kernel/core/tos_timer.c ****         }
 1318              		.loc 1 299 24 is_stmt 0 view .LVU383
 1319 006c 0323     		movs	r3, #3
 1320 006e 84F83230 		strb	r3, [r4, #50]
 1321 0072 E0E7     		b	.L100
 1322              	.L98:
 305:..//kernel/core/tos_timer.c **** }
 1323              		.loc 1 305 5 is_stmt 1 view .LVU384
 1324 0074 FFF7FEFF 		bl	tos_knl_sched_unlock
 1325              	.LVL127:
 1326 0078 CDE7     		b	.L95
 1327              	.L106:
 1328 007a 00BF     		.align	2
 1329              	.L105:
 1330 007c 00000000 		.word	k_timer_ctl
 1331 0080 00000000 		.word	k_tick_count
 1332 0084 08000000 		.word	k_timer_ctl+8
 1333              		.cfi_endproc
 1334              	.LFE121:
 1336              		.section	.text.timer_init,"ax",%progbits
 1337              		.align	1
 1338              		.global	timer_init
 1339              		.syntax unified
 1340              		.thumb
 1341              		.thumb_func
 1342              		.fpu softvfp
 1344              	timer_init:
 1345              	.LFB122:
 307:..//kernel/core/tos_timer.c **** 
 308:..//kernel/core/tos_timer.c **** #else /* TOS_CFG_TIMER_AS_PROC > 0u */
 309:..//kernel/core/tos_timer.c **** 
 310:..//kernel/core/tos_timer.c **** __STATIC__ void timer_task_entry(void *arg)
 311:..//kernel/core/tos_timer.c **** {
 312:..//kernel/core/tos_timer.c ****     k_timer_t *tmr, *tmp;
 313:..//kernel/core/tos_timer.c ****     k_tick_t next_expires;
 314:..//kernel/core/tos_timer.c **** 
 315:..//kernel/core/tos_timer.c ****     arg = arg; // make compiler happy
 316:..//kernel/core/tos_timer.c ****     while (K_TRUE) {
 317:..//kernel/core/tos_timer.c ****         next_expires = timer_next_expires_get();
 318:..//kernel/core/tos_timer.c ****         if (next_expires == TOS_TIME_FOREVER) {
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 41


 319:..//kernel/core/tos_timer.c ****             tos_task_suspend(K_NULL);
 320:..//kernel/core/tos_timer.c ****         } else if (next_expires > (k_tick_t)0u) {
 321:..//kernel/core/tos_timer.c ****             tos_task_delay(next_expires);
 322:..//kernel/core/tos_timer.c ****         }
 323:..//kernel/core/tos_timer.c **** 
 324:..//kernel/core/tos_timer.c ****         tos_knl_sched_lock();
 325:..//kernel/core/tos_timer.c **** 
 326:..//kernel/core/tos_timer.c ****         TOS_LIST_FOR_EACH_ENTRY_SAFE(tmr, tmp, k_timer_t, list, &k_timer_ctl.list) {
 327:..//kernel/core/tos_timer.c ****             if (tmr->expires > k_tick_count) { // not yet
 328:..//kernel/core/tos_timer.c ****                 break;
 329:..//kernel/core/tos_timer.c ****             }
 330:..//kernel/core/tos_timer.c **** 
 331:..//kernel/core/tos_timer.c ****             // time's up
 332:..//kernel/core/tos_timer.c ****             timer_takeoff(tmr);
 333:..//kernel/core/tos_timer.c **** 
 334:..//kernel/core/tos_timer.c ****             if (tmr->opt == TOS_OPT_TIMER_PERIODIC) {
 335:..//kernel/core/tos_timer.c ****                 tmr->expires = tmr->period;
 336:..//kernel/core/tos_timer.c ****                 timer_place(tmr);
 337:..//kernel/core/tos_timer.c ****             } else {
 338:..//kernel/core/tos_timer.c ****                 tmr->state = TIMER_STATE_COMPLETED;
 339:..//kernel/core/tos_timer.c ****             }
 340:..//kernel/core/tos_timer.c **** 
 341:..//kernel/core/tos_timer.c ****             (*tmr->cb)(tmr->cb_arg);
 342:..//kernel/core/tos_timer.c ****         }
 343:..//kernel/core/tos_timer.c **** 
 344:..//kernel/core/tos_timer.c ****         tos_knl_sched_unlock();
 345:..//kernel/core/tos_timer.c ****     }
 346:..//kernel/core/tos_timer.c **** }
 347:..//kernel/core/tos_timer.c **** 
 348:..//kernel/core/tos_timer.c **** #endif
 349:..//kernel/core/tos_timer.c **** 
 350:..//kernel/core/tos_timer.c **** __KNL__ k_err_t timer_init(void)
 351:..//kernel/core/tos_timer.c **** {
 1346              		.loc 1 351 1 view -0
 1347              		.cfi_startproc
 1348              		@ args = 0, pretend = 0, frame = 0
 1349              		@ frame_needed = 0, uses_anonymous_args = 0
 1350              		@ link register save eliminated.
 352:..//kernel/core/tos_timer.c **** #if TOS_CFG_TIMER_AS_PROC > 0u
 353:..//kernel/core/tos_timer.c ****     return K_ERR_NONE;
 1351              		.loc 1 353 5 view .LVU386
 354:..//kernel/core/tos_timer.c **** #else
 355:..//kernel/core/tos_timer.c ****     return tos_task_create(&k_timer_task,
 356:..//kernel/core/tos_timer.c ****             "timer",
 357:..//kernel/core/tos_timer.c ****             timer_task_entry,
 358:..//kernel/core/tos_timer.c ****             K_NULL,
 359:..//kernel/core/tos_timer.c ****             k_timer_task_prio,
 360:..//kernel/core/tos_timer.c ****             k_timer_task_stk_addr,
 361:..//kernel/core/tos_timer.c ****             k_timer_task_stk_size,
 362:..//kernel/core/tos_timer.c ****             0);
 363:..//kernel/core/tos_timer.c **** #endif
 364:..//kernel/core/tos_timer.c **** }
 1352              		.loc 1 364 1 is_stmt 0 view .LVU387
 1353 0000 0020     		movs	r0, #0
 1354 0002 7047     		bx	lr
 1355              		.cfi_endproc
 1356              	.LFE122:
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 42


 1358              		.text
 1359              	.Letext0:
 1360              		.file 4 "..//kernel/core/include/tos_kerr.h"
 1361              		.file 5 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 1362              		.file 6 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 1363              		.file 7 "Drivers/CMSIS/Include/core_cm3.h"
 1364              		.file 8 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 1365              		.file 9 "d:\\arm_gcc\\8 2019-q3-update\\lib\\gcc\\arm-none-eabi\\8.3.1\\include\\stddef.h"
 1366              		.file 10 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\sys\\_types.h"
 1367              		.file 11 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\sys\\reent.h"
 1368              		.file 12 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\sys\\lock.h"
 1369              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 1370              		.file 14 "..//arch/arm/arm-v7m/common/include/tos_cpu_types.h"
 1371              		.file 15 "..//kernel/core/include/tos_ktypes.h"
 1372              		.file 16 "..//kernel/core/include/tos_task.h"
 1373              		.file 17 "d:\\arm_gcc\\8 2019-q3-update\\arm-none-eabi\\include\\stdlib.h"
 1374              		.file 18 "..//kernel/core/include/tos_pend.h"
 1375              		.file 19 "..//kernel/core/include/tos_timer.h"
 1376              		.file 20 "..//kernel/core/include/tos_mmheap.h"
 1377              		.file 21 "..//kernel/core/include/tos_sched.h"
 1378              		.file 22 "..//kernel/core/include/tos_global.h"
 1379              		.file 23 "..//arch/arm/arm-v7m/common/include/tos_cpu.h"
ARM GAS  C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s 			page 43


DEFINED SYMBOLS
                            *ABS*:00000000 tos_timer.c
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:16     .text.timer_change:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:23     .text.timer_change:00000000 timer_change
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:162    .text.timer_takeoff:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:168    .text.timer_takeoff:00000000 timer_takeoff
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:289    .text.timer_takeoff:0000004c $d
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:294    .text.timer_place:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:300    .text.timer_place:00000000 timer_place
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:424    .text.timer_place:00000074 $d
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:431    .text.tos_timer_create:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:438    .text.tos_timer_create:00000000 tos_timer_create
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:635    .text.tos_timer_destroy:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:642    .text.tos_timer_destroy:00000000 tos_timer_destroy
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:792    .text.tos_timer_start:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:799    .text.tos_timer_start:00000000 tos_timer_start
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:940    .text.tos_timer_stop:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:947    .text.tos_timer_stop:00000000 tos_timer_stop
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:1062   .text.tos_timer_delay_change:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:1069   .text.tos_timer_delay_change:00000000 tos_timer_delay_change
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:1100   .text.tos_timer_period_change:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:1107   .text.tos_timer_period_change:00000000 tos_timer_period_change
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:1138   .text.timer_next_expires_get:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:1145   .text.timer_next_expires_get:00000000 timer_next_expires_get
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:1207   .text.timer_next_expires_get:0000003c $d
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:1213   .text.timer_update:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:1220   .text.timer_update:00000000 timer_update
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:1330   .text.timer_update:0000007c $d
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:1337   .text.timer_init:00000000 $t
C:\Users\tianx\AppData\Local\Temp\ccx7ZJPt.s:1344   .text.timer_init:00000000 timer_init

UNDEFINED SYMBOLS
tos_cpu_cpsr_save
tos_cpu_cpsr_restore
k_timer_ctl
k_tick_count
tos_knl_sched_lock
tos_knl_sched_unlock
